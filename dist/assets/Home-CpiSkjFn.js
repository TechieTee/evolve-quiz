import{R as L,j as e,r as h}from"./index-D3wjIrag.js";const Z="/assets/body-front-pOEcJjsO.svg",J=({areasResponse:i,onSelect:d,selectedAreas:r,isLoading:u=!1,showFrontView:n})=>{const[m,v]=L.useState(null),y=()=>{if(u)return[];if(!Array.isArray(i))return[];if(i.length<2)return[];const t=n?i[1]:i[0];return(t==null?void 0:t.children)||[]},x=L.useMemo(()=>y(),[i,n,u,y]),o=t=>{t.count===0?v(`No conditions available for ${t.name}.`):(v(null),d(t))};return u?e.jsxs("div",{className:"area-selection-loading",children:[e.jsx("div",{className:"loading-animation"}),e.jsx("p",{children:"Loading body areas..."})]}):Array.isArray(i)?e.jsxs("div",{className:"area-selection-container",children:[m&&e.jsx("div",{className:"info-message",children:m}),e.jsxs("div",{className:"area-selection-grid",children:[x.length>0?x.map(t=>e.jsx("button",{onClick:()=>o(t),className:`area-button ${r.some(p=>p.id===t.id)?"active":""}`,children:e.jsx("span",{className:"area-name",children:t.name})},t.id)):e.jsx("div",{className:"empty-state",children:e.jsxs("p",{children:["No ",n?"front":"back"," areas available"]})}),e.jsx("img",{src:Z,alt:"FrontBody"})]})]}):e.jsxs("div",{className:"area-selection-error",children:[e.jsx("div",{className:"error-icon",children:"!"}),e.jsx("p",{className:"error-message",children:i.message}),e.jsx("button",{className:"retry-button",onClick:()=>window.location.reload(),children:"Try Again"})]})},K=({conditions:i=[],bodypart:d,onSelect:r,selectedConditions:u})=>!i||i.length===0?e.jsx("div",{className:"condition-empty-state",children:"No conditions available for this body part"}):e.jsxs("div",{className:"condition-container",children:[e.jsxs("h3",{className:"concerns-header-text",children:[d," Concerns"]}),e.jsx("div",{className:"condition-grid",children:i.map(n=>e.jsx("div",{className:`condition-item ${u.some(m=>m.id===n.id)?"selected":""}`,onClick:()=>r(n),children:e.jsxs("div",{className:"condition-content",children:[e.jsx("span",{className:"condition-title",children:n.title}),e.jsxs("span",{className:`custom-checkbox ${u.some(m=>m.id===n.id)?"checked":""}`,children:[" ",u.some(m=>m.id===n.id)&&e.jsx("svg",{className:"check-icon",xmlns:"http://www.w3.org/2000/svg",width:"10",height:"10",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"20 6 9 17 4 12"})})]})]})},n.id))})]});/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),X=i=>i.replace(/^([A-Z])|[\s-_]+(\w)/g,(d,r,u)=>u?u.toUpperCase():r.toLowerCase()),M=i=>{const d=X(i);return d.charAt(0).toUpperCase()+d.slice(1)},D=(...i)=>i.filter((d,r,u)=>!!d&&d.trim()!==""&&u.indexOf(d)===r).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ee={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=h.forwardRef(({color:i="currentColor",size:d=24,strokeWidth:r=2,absoluteStrokeWidth:u,className:n="",children:m,iconNode:v,...y},x)=>h.createElement("svg",{ref:x,...ee,width:d,height:d,stroke:i,strokeWidth:u?Number(r)*24/Number(d):r,className:D("lucide",n),...y},[...v.map(([o,t])=>h.createElement(o,t)),...Array.isArray(m)?m:[m]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=(i,d)=>{const r=h.forwardRef(({className:u,...n},m)=>h.createElement(se,{ref:m,iconNode:d,className:D(`lucide-${G(M(i))}`,`lucide-${i}`,u),...n}));return r.displayName=M(i),r};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],te=I("arrow-left",ne);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],ie=I("arrow-right",ae),re=({selectedBodyParts:i,resetQuiz:d})=>{const[r,u]=h.useState([]),n=h.useRef([]),m=(o,t)=>{var f;const p=n.current[o];if(p){const j=((f=p.children[0])==null?void 0:f.clientWidth)||0;p.scrollTo({left:t*(j+40),behavior:"smooth"}),y(o,t)}},v=o=>{var p;const t=n.current[o];if(t){const f=((p=t.children[0])==null?void 0:p.clientWidth)||0,j=Math.round(t.scrollLeft/(f+40));y(o,j)}},y=(o,t)=>{u(p=>{const f=[...p];return f[o]=t,f})},x=(o,t)=>{const p=r[o]||0,f=n.current[o];if(!f)return;const j=f.children.length,b=t==="prev"?Math.max(0,p-1):Math.min(j-1,p+1);m(o,b)};return e.jsx("main",{className:"recommendations",children:e.jsxs("div",{className:"container",children:[e.jsxs("header",{className:"header",children:[e.jsx("h1",{className:"title",children:"Your Recommendations Are In!"}),e.jsx("p",{className:"subtitle",children:"Here is what we suggest based on your skin + body goals"}),e.jsxs("div",{className:"button-group",children:[e.jsx("button",{className:"link-button",onClick:d,children:"Take the quiz again"}),e.jsx("button",{className:"appointment-button",children:"Book Appointment"})]})]}),i.map((o,t)=>e.jsxs("div",{children:[e.jsx("h2",{className:"body-part-title",children:o.area.name}),o.conditions.map((p,f)=>{var k;const j=t*100+f,b=((k=p.recommended_services)==null?void 0:k.map(N=>{var g;return{category:((g=N.taxonomy[0])==null?void 0:g.name)||"SERVICE",title:N.title,description:N.description||"Description..."}}))||[];return r[j]===void 0&&(r[j]=0),e.jsxs("section",{className:"treatment-section",children:[e.jsx("div",{className:"section-header",children:e.jsx("h2",{className:"section-title",children:p.title})}),b.length>0?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"carousel",children:[e.jsx("div",{className:"carousel-content",ref:N=>{n.current[j]=N},onScroll:()=>v(j),children:b.map((N,g)=>e.jsx("div",{className:"carousel-item",children:e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-content",children:[e.jsx("span",{className:"badge",children:N.category}),e.jsx("h3",{className:"treatment-title",children:N.title}),e.jsx("p",{className:"treatment-description",children:N.description})]})})},g))}),e.jsxs("div",{className:"carousel-navigation",children:[e.jsx("button",{className:"carousel-prev",onClick:()=>x(j,"prev"),disabled:r[j]===0,children:e.jsx(te,{className:"w-5 h-5",color:"black"})}),e.jsx("button",{className:"carousel-next",onClick:()=>x(j,"next"),disabled:r[j]===b.length-1,children:e.jsx(ie,{className:"w-5 h-5",color:"black"})})]}),e.jsx("div",{className:"dots-navigation",children:b.map((N,g)=>e.jsx("div",{className:`dot ${g===r[j]?"active":""}`,onClick:()=>m(j,g)},g))})]})}):e.jsx("p",{className:"no-treatments",children:"No treatments recommended for this condition"})]},f)})]},t))]})})},oe=()=>{const[i,d]=h.useState([]),[r,u]=h.useState([]),[n,m]=h.useState(null),[v,y]=h.useState([]),[x,o]=h.useState([]),[t,p]=h.useState(!0),[f,j]=h.useState(null),[b,k]=h.useState(!0),[N,g]=h.useState(!1),[O,A]=h.useState(!1),[F,T]=h.useState(null),[C,z]=h.useState({name:"",email:"",phone:"",areas:"",conditions:"",consent:!1}),P=async()=>{var a,s;p(!0);try{const c=await fetch("https://evolvequizdev.wpengine.com/wp-json/wp-evolve-body-quiz/v1/areas",{headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include"});if(!c.ok){const w=await c.json();throw new Error(w.message||"Failed to fetch areas")}const l=await c.json();d(l),k(((s=(a=l[1])==null?void 0:a.children)==null?void 0:s.length)>0)}catch(c){const l=c instanceof Error?c.message:"Unknown error";d({message:l}),j(l)}finally{p(!1)}},$=async a=>{p(!0);try{const s=await fetch(`https://evolvequizdev.wpengine.com/wp-json/wp-evolve-body-quiz/v1/conditions?area=${a}`,{headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include"});if(!s.ok){const l=await s.json();throw new Error(l.message||"Failed to fetch conditions")}const c=await s.json();y(c||[])}catch(s){const c=s instanceof Error?s.message:"Failed to load conditions";j(c),y([])}finally{p(!1)}};h.useEffect(()=>{P()},[]),h.useEffect(()=>{n&&$(n.id)},[n]);const B=a=>{m(a),g(!1),A(!1),r.some(s=>s.id===a.id)||u(s=>[...s,a])},R=()=>{k(!b),m(null),g(!1),A(!1)},_=()=>{if(n&&v.length>0){const a=x.findIndex(s=>s.area.id===n.id);a>=0?o(s=>s.map((c,l)=>l===a?{...c,conditions:[...c.conditions]}:c)):o(s=>[...s,{area:n,conditions:[]}])}g(!0),m(null)},W=()=>{A(!0),T(null)};h.useEffect(()=>{x.length>0&&z(a=>({...a,areas:x.map(s=>s.area.name).join(", "),conditions:x.flatMap(s=>s.conditions.map(c=>c.title)).join(", ")}))},[x]);const q=a=>{const{name:s,value:c,type:l,checked:w}=a.target;z(S=>({...S,[s]:l==="checkbox"?w:c}))},U=a=>{a.preventDefault();const s=new Date().toLocaleString(),c=x.map(l=>({bodyArea:l.area.name,conditions:l.conditions.map(w=>w.title),services:l.conditions.flatMap(w=>{var S;return((S=w.recommended_services)==null?void 0:S.map(E=>E.title))||[]})}));T({...C,date:s,groupedData:c}),A(!1),g(!1)},H=a=>{n&&o(s=>{const c=s.findIndex(l=>l.area.id===n.id);return c>=0?s.map((l,w)=>{if(w===c){const S=l.conditions.some(E=>E.id===a.id);return{...l,conditions:S?l.conditions.filter(E=>E.id!==a.id):[...l.conditions,a]}}return l}):[...s,{area:n,conditions:[a]}]})},V=()=>{if(!n)return[];const a=x.find(s=>s.area.id===n.id);return a?a.conditions:[]},Y=()=>{T(null),u([]),o([]),m(null),g(!1),A(!1)};if(f)return e.jsxs("div",{className:"error-message",children:["Error: ",f]});const Q=()=>F?null:O?e.jsx("div",{className:"consultation-form",children:e.jsxs("div",{className:"form-container",children:[e.jsx("h3",{children:"Complete your Consultation"}),e.jsxs("form",{onSubmit:U,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"name",children:"Name"}),e.jsx("input",{type:"text",id:"name",name:"name",value:C.name,onChange:q,required:!0,placeholder:"Enter your full name"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"email",children:"Email"}),e.jsx("input",{type:"email",id:"email",name:"email",value:C.email,onChange:q,required:!0,placeholder:"Enter your email"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"phone",children:"Phone"}),e.jsx("input",{type:"tel",id:"phone",name:"phone",value:C.phone,onChange:q,required:!0,placeholder:"Enter your phone number"})]}),e.jsxs("div",{className:"form-group checkbox-group",children:[e.jsx("input",{type:"checkbox",id:"consent",name:"consent",checked:C.consent||!1,onChange:q,required:!0}),e.jsxs("label",{htmlFor:"consent",className:"consent-text",children:["I agree to receiving appointment confirmations, reminders and marketing communications via email and SMS messages. Msg & data rates may apply. Msg frequency varies. Reply HELP for help and STOP to cancel. View our"," ",e.jsx("a",{href:"/#",children:"Privacy Policy"})]})]}),e.jsx("input",{type:"hidden",name:"areas",value:C.areas}),e.jsx("input",{type:"hidden",name:"conditions",value:C.conditions}),e.jsx("div",{className:"form-actions",children:e.jsx("button",{type:"submit",className:"area-button",disabled:t,children:t?"Submitting...":"COMPLETE CONSULTATION"})})]})]})}):N&&x.length>0?e.jsxs("div",{children:[e.jsx("h3",{className:"quiz-card-header-text",children:"Your Selections"}),x.map(a=>e.jsxs("div",{className:"body-part-section",children:[e.jsx("p",{className:"body-part-name",children:e.jsx("strong",{children:a.area.name})}),a.conditions.length>0?e.jsx("ul",{className:"conditions-list",children:a.conditions.map(s=>e.jsxs("li",{children:[s.title," ",e.jsx("span",{className:"delete-icon",children:"Ã—"})]},s.id))}):e.jsx("p",{className:"no-conditions",children:"No conditions selected"})]},a.area.id)),e.jsx("button",{onClick:W,className:"area-button",disabled:x.reduce((a,s)=>a+s.conditions.length,0)===0,children:"COMPLETE CONSULTATION"})]}):n?t?e.jsx("div",{className:"loading-spinner",children:"Loading quiz data..."}):e.jsxs(e.Fragment,{children:[e.jsx(K,{bodypart:n.name,conditions:v,onSelect:H,selectedConditions:V()}),v.length>0&&e.jsx("button",{onClick:_,className:"area-button",style:{marginTop:"60px"},children:"ADD TREATMENTS"})]}):e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"quiz-card-header-text",children:"Your Selections"}),e.jsx("span",{className:"quiz-card-desc-text",children:"Start your quiz by clicking on a body part you want to be treated."})]});return e.jsxs(e.Fragment,{children:[!F&&e.jsxs("div",{className:"quiz-main-grid",children:[e.jsx("div",{className:"quiz-content-area",children:e.jsxs("div",{className:"view-toggle-container",children:[e.jsx(J,{areasResponse:i,onSelect:B,selectedAreas:r,isLoading:t,showFrontView:b}),e.jsx("div",{onClick:R,className:"flipper",children:b?"Back":"Front"})]})}),e.jsx("div",{className:"selection-panel",children:Q()})]}),F&&e.jsx(re,{selectedBodyParts:x,resetQuiz:Y})]})},le=()=>e.jsx("div",{className:"home-page",children:e.jsx("main",{className:"main-content",children:e.jsx("section",{className:"quiz-container-section",children:e.jsx("div",{className:"quiz-wrapper",children:e.jsx(oe,{})})})})});export{le as default};
