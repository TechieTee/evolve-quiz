import{j as e,r,A as de,a as ue,R as he,u as me}from"./index-GQ3-xDM2.js";const pe=()=>e.jsx("div",{className:"spinner"}),fe=({conditions:c=[],bodypart:N,onSelect:x,selectedConditions:m})=>!Array.isArray(c)||c.length===0?e.jsx("div",{className:"condition-empty-state",children:"No conditions available for this body part"}):e.jsxs("div",{className:"condition-grid",children:[e.jsxs("h3",{className:"concerns-header-text",children:[N," Concerns"]}),c.map(o=>e.jsx("div",{className:`condition-item ${m.some(h=>h.id===o.id)?"selected":""}`,onClick:()=>x(o),children:e.jsxs("div",{className:"condition-content",children:[e.jsx("span",{className:"condition-title",children:o.title}),e.jsx("span",{className:`custom-checkbox ${m.some(h=>h.id===o.id)?"checked":""}`,children:m.some(h=>h.id===o.id)&&e.jsx("svg",{className:"check-icon",xmlns:"http://www.w3.org/2000/svg",width:"10",height:"10",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"20 6 9 17 4 12"})})})]})},o.id))]}),xe=c=>{const N=["Injectable Services","Device Services","Esthi Services","Retail Items"];return[...c].sort((x,m)=>{var d,u;const o=((d=x.taxonomy[0])==null?void 0:d.name)||"SERVICE",h=((u=m.taxonomy[0])==null?void 0:u.name)||"SERVICE",y=N.indexOf(o),v=N.indexOf(h);return y===-1?1:v===-1?-1:y-v})},je=({selectedBodyParts:c,resetQuiz:N})=>{const x=r.useRef({}),[m,o]=r.useState({}),[h,y]=r.useState(1);r.useEffect(()=>{const u=()=>{window.innerWidth<640?y(1):window.innerWidth<1024?y(2):y(3)};return u(),window.addEventListener("resize",u),()=>window.removeEventListener("resize",u)},[]);const v=u=>{var l;const C=x.current[u];if(!C)return;const j=C.scrollLeft,i=((l=C.children[0])==null?void 0:l.clientWidth)||0,p=Math.round(j/(i+24));o(g=>({...g,[u]:p}))},d=(u,C,j)=>{var g;const i=x.current[u];if(!i)return;const p=Math.max(0,Math.min(C,j-1)),l=((g=i.children[0])==null?void 0:g.clientWidth)||0;i.scrollTo({left:p*(l+24),behavior:"smooth"})};return e.jsx("main",{className:"recommendations",children:e.jsxs("div",{className:"container",children:[e.jsxs("header",{className:"header",children:[e.jsx("h1",{className:"title",children:"Your Recommendations Are In!"}),e.jsx("p",{className:"subtitle",children:"Here is what we suggest based on your skin + body goals"}),e.jsxs("div",{className:"button-group",children:[e.jsx("button",{className:"link-button",onClick:N,children:"Take the quiz again"}),e.jsx("button",{className:"appointment-button",children:"Book Appointment"})]})]}),c.map((u,C)=>e.jsx("div",{children:u.conditions.map((j,i)=>{const p=xe(j.recommended_services||[]),l=Math.ceil(p.length/h),g=`${C}-${i}`,k=m[g]||0;return e.jsxs("section",{className:"treatment-section",children:[e.jsx("div",{className:"section-header",children:e.jsx("h2",{className:"section-title",children:j.title})}),p.length>0?e.jsxs("div",{className:"carousel-container",children:[e.jsx("button",{className:"carousel-nav-button carousel-nav-prev",onClick:()=>d(g,k-1,l),disabled:k===0,children:e.jsx(de,{size:20,color:"black"})}),e.jsx("div",{className:"carousel-content",ref:w=>{x.current[g]=w},onScroll:()=>v(g),children:p.map((w,S)=>{var E;return e.jsx("div",{className:"carousel-item",children:e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-content",children:[e.jsx("span",{className:"badge",children:((E=w.taxonomy[0])==null?void 0:E.name)||"SERVICE"}),e.jsx("h3",{className:"treatment-title",children:w.title}),e.jsx("p",{className:"treatment-description",children:w.content})]})})},S)})}),e.jsx("button",{className:"carousel-nav-button carousel-nav-next",onClick:()=>d(g,k+1,l),disabled:k>=l-1,children:e.jsx(ue,{size:20,color:"black"})}),e.jsx("div",{className:"carousel-dots",children:[...Array(l)].map((w,S)=>e.jsx("button",{className:`carousel-dot ${S===k?"carousel-dot-active":""}`,onClick:()=>d(g,S,l)},S))})]}):e.jsx("p",{className:"no-treatments",children:"No treatments recommended for this condition"})]},i)})},C))]})})},I={front:[{area:"Chest",path:"M93,185 C103,175 113,175 123,185 C133,195 133,215 123,225 C113,235 103,235 93,225 C83,215 83,195 93,185 Z",left:"49.65%",top:"23.31%"},{area:"Abdomen",path:"M93,225 C103,235 113,235 123,225 C133,215 133,275 123,285 C113,295 103,295 93,285 C83,275 83,215 93,225 Z",left:"49.65%",top:"35.39%"},{area:"Arm",path:"M30,185 C20,195 15,215 20,235 C25,255 35,265 45,255 C55,245 60,225 55,205 C50,185 40,175 30,185 Z",left:"7.18%",top:"25.93%"},{area:"Flank",path:"M50,225 C40,235 35,255 40,275 C45,295 55,305 65,295 C75,285 80,265 75,245 C70,225 60,215 50,225 Z",left:"24.82%",top:"33.39%"},{area:"Hand",path:"M20,275 C10,285 5,305 10,325 C15,345 25,355 35,345 C45,335 50,315 45,295 C40,275 30,265 20,275 Z",left:"10.63%",top:"52.44%"},{area:"Intimate",path:"M93,285 C103,295 113,295 123,285 C133,275 133,315 123,325 C113,335 103,335 93,325 C83,315 83,275 93,285 Z",left:"49.65%",top:"44.25%"},{area:"Thighs",path:"M93,325 C103,335 113,335 123,325 C133,315 133,375 123,385 C113,395 103,395 93,385 C83,375 83,315 93,325 Z",left:"30.65%",top:"54.72%"},{area:"Lower Legs",path:"M93,385 C103,395 113,395 123,385 C133,375 133,455 123,465 C113,475 103,475 93,465 C83,455 83,375 93,385 Z",left:"40.65%",top:"86.79%"}],back:[{area:"Back",path:"M93,210 C103,220 113,220 123,210 C133,200 133,260 123,270 C113,280 103,280 93,270 C83,260 83,200 93,210 Z",left:"49.65%",top:"32.00%"},{area:"Buttocks",path:"M93,270 C103,280 113,280 123,270 C133,260 133,310 123,320 C113,330 103,330 93,320 C83,310 83,260 93,270 Z",left:"70.65%",top:"43.80%"}],head:[{area:"Scalp",path:"M80,40 C90,35 100,35 110,40 C115,45 115,55 110,60 C100,65 90,65 80,60 C75,55 75,45 80,40 Z",left:"41.65%",top:"5.50%"},{area:"Forehead",path:"M80,50 C90,45 100,45 110,50 C115,55 115,65 110,70 C100,75 90,75 80,70 C75,65 75,55 80,50 Z",left:"41.65%",top:"15.25%"},{area:"Eyes",path:"M80,70 C90,65 100,65 110,70 C115,75 115,85 110,90 C100,95 90,95 80,90 C75,85 75,75 80,70 Z",left:"26.65%",top:"30.50%"},{area:"Full Face",path:"M80,50 C100,40 120,40 140,50 C150,60 150,80 140,90 C120,100 100,100 80,90 C70,80 70,60 80,50 Z",left:"20.65%",top:"45.00%"},{area:"Mid-Face",path:"M80,65 C90,60 100,60 110,65 C115,70 115,80 110,85 C100,90 90,90 80,85 C75,80 75,70 80,65 Z",left:"41.65%",top:"43.50%"},{area:"Lips/Mouth",path:"M90,85 C100,90 110,90 120,85 C125,82 125,88 120,85 C110,80 100,80 90,85 C85,88 85,82 90,85 Z",left:"41.65%",top:"70.25%"},{area:"Neck",path:"M90,90 C100,95 110,95 120,90 C125,100 125,110 120,120 C110,125 100,125 90,120 C85,110 85,100 90,90 Z",left:"29.65%",top:"90.50%"}]},ge=({viewType:c,selectedAreas:N,onAreaSelect:x,gender:m})=>{const[o,h]=r.useState(null),v=(()=>{switch(c){case"front":return I.front;case"back":return I.back;case"face":return I.head;default:return I.front}})(),d=()=>{switch(c){case"front":return m==="female"?"/female-body-front.svg":"/male-body-front.svg";case"back":return m==="female"?"/female-body-back.svg":"/male-body-back.svg";case"face":return"/face.svg";default:return m==="female"?"/female-body-front.svg":"/male-body-front.svg"}},u=i=>{v.find(l=>l.area===i)&&x(i)},C=()=>c==="face"?"0 0 350 350":"0 0 187 733",j=i=>{if(c==="face"){const p=parseFloat(i.left)/100*300+50,l=parseFloat(i.top)/100*300+50;return{left:p,top:l}}else{const p=parseFloat(i.left)/100*187,l=parseFloat(i.top)/100*733;return{left:p,top:l}}};return e.jsx("div",{className:"body-map-svg-container",children:e.jsxs("svg",{viewBox:C(),className:`body-svg ${c==="face"?"face-view":""}`,preserveAspectRatio:"xMidYMid meet",children:[e.jsx("image",{href:d(),width:c==="face"?"250":"187",height:c==="face"?"300":"733",x:c==="face"?"50":"0",y:c==="face"?"50":"0",preserveAspectRatio:"xMidYMid meet"}),v.map(i=>{const{left:p,top:l}=j(i);return e.jsxs(he.Fragment,{children:[e.jsx("circle",{cx:p,cy:l,r:"10",className:`body-area-path ${o===i.area?"hovered":""}`,onClick:()=>u(i.area),onMouseEnter:()=>h(i.area),onMouseLeave:()=>h(null),filter:"url(#dropshadow)"}),e.jsx("text",{x:p,y:l,textAnchor:"middle",dominantBaseline:"middle",className:"plus-icon",children:"+"}),N.includes(i.area)&&e.jsx("circle",{cx:p,cy:l,r:"8",className:"selected-area-indicator"})]},i.area)}),o&&e.jsx("text",{x:j(v.find(i=>i.area===o)||v[0]).left,y:j(v.find(i=>i.area===o)||v[0]).top-10,className:"area-tooltip",children:o})]})})},ve=({isOpen:c,onClose:N,children:x})=>{const[m,o]=r.useState(c);r.useEffect(()=>{o(c)},[c]);const h=()=>{o(!m),m&&N()};return typeof window>"u"||window.innerWidth>768?e.jsx(e.Fragment,{children:x}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`panel-overlay ${m?"open":""}`,onClick:h}),e.jsxs("div",{className:`selection-panel ${m?"open":""}`,children:[e.jsx("div",{className:"panel-toggle",onClick:h,children:e.jsx("div",{className:"toggle-handle",children:"Ã—"})}),x]})]})},Ce=()=>{const[c,N]=r.useState([]),[x,m]=r.useState([]),[o,h]=r.useState(null),[y,v]=r.useState([]),[d,u]=r.useState([]),[C,j]=r.useState(!0),[i,p]=r.useState(null),l=r.useRef(null),g=r.useRef(null),k=r.useRef(null),w=r.useRef(null);console.log(d,"selectedBodyParts");const[S,E]=r.useState(!0),[q,Y]=r.useState(!1),[z,Z]=r.useState(!1),[W,R]=r.useState(!1),[H,B]=r.useState(!1),[L,$]=r.useState("female"),[G,O]=r.useState(!1),[P,D]=r.useState(null),[A,J]=r.useState({firstName:"",lastName:"",email:"",phone:"",areas:"",conditions:"",consent:!1,location:""}),U=me(),_=async()=>{var t,s;j(!0);try{const a=await fetch("https://evolvequizdev.wpengine.com/wp-json/wp-evolve-body-quiz/v1/areas",{headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include"});if(!a.ok){const f=await a.json();throw new Error(f.message||"Failed to fetch areas")}const n=await a.json();N(n),E(((s=(t=n[1])==null?void 0:t.children)==null?void 0:s.length)>0)}catch(a){const n=a instanceof Error?a.message:"Unknown error";N({message:n}),p(n)}finally{j(!1)}},Q=async t=>{j(!0);try{const s=await fetch(`https://evolvequizdev.wpengine.com/wp-json/wp-evolve-body-quiz/v1/conditions?area=${t}`,{headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include"});if(!s.ok){const n=await s.json();throw new Error(n.message||"Failed to fetch conditions")}const a=await s.json();v(Array.isArray(a)?a:[])}catch(s){const a=s instanceof Error?s.message:"Failed to load conditions";p(a),v([])}finally{j(!1)}};r.useEffect(()=>{_()},[]),r.useEffect(()=>{o&&(O(!0),Q(o.id))},[o]);const X=t=>{h(t),R(!1),B(!1),x.some(s=>s.id===t.id)||m(s=>[...s,t])};r.useEffect(()=>{const t=()=>{const s=l.current,a=L==="female"?g.current:k.current;if(s&&a&&w.current){const n=s.getBoundingClientRect(),f=a.getBoundingClientRect(),b=f.left-n.left,M=f.width;w.current.style.transform=`translateX(${b}px)`,w.current.style.width=`${M}px`}};return t(),window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[L,g.current,k.current]);const V=t=>{E(t==="front"),Y(t==="back"),Z(t==="face"),h(null),R(!1),B(!1)},K=()=>{if(o&&y.length>0){const t=d.findIndex(s=>s.area.id===o.id);t>=0?u(s=>s.map((a,n)=>n===t?{...a,conditions:[...a.conditions]}:a)):u(s=>[...s,{area:o,conditions:[]}])}R(!0),h(null)},ee=()=>{B(!0),D(null)};r.useEffect(()=>{d.length>0&&J(t=>({...t,areas:d.map(s=>s.area.name).join(", "),conditions:d.flatMap(s=>s.conditions.map(a=>a.title)).join(", ")}))},[d]);const F=t=>{const{name:s,value:a,type:n}=t.target,f=t.target.checked;J(b=>({...b,[s]:n==="checkbox"?f:a}))},te=t=>{t.preventDefault();const s=new Date().toLocaleString(),a=d.map(f=>({bodyArea:f.area.name,conditions:f.conditions.map(b=>b.title),services:f.conditions.flatMap(b=>{var M;return((M=b.recommended_services)==null?void 0:M.map(le=>le.title))||[]})}));D({...A,date:s,groupedData:a}),B(!1),R(!1);const n=d.flatMap(f=>f.conditions.map(b=>b.id)).join("-");if(console.log(n,"conditionIds"),U(`/results?qs=${n}`),console.log(`https://evolvequizdev.wpengine.com/wp-json/wp-evolve-body-quiz/v1/results?qs=${n}`,"url"),n.length===0){alert("Please select at least one condition before submitting.");return}},se=t=>{o&&u(s=>{const a=s.findIndex(n=>n.area.id===o.id);return a>=0?s.map((n,f)=>{if(f===a){const b=n.conditions.some(M=>M.id===t.id);return{...n,conditions:b?n.conditions.filter(M=>M.id!==t.id):[...n.conditions,t]}}return n}):[...s,{area:o,conditions:[t]}]})},ne=(t,s)=>{u(a=>a.map(n=>{if(n.area.id===t){const f=n.conditions.filter(b=>b.id!==s);return{...n,conditions:f}}return n}).filter(n=>n.conditions.length>0))},ae=()=>{if(!o)return[];const t=d.find(s=>s.area.id===o.id);return t?t.conditions:[]},T=(t,s)=>{var a;for(const n of t){if(n.name===s)return n;if((a=n.children)!=null&&a.length){const f=T(n.children,s);if(f)return f}}},oe=()=>{D(null),m([]),u([]),h(null),R(!1),B(!1),E(!0),Y(!1),Z(!1)};if(i)return e.jsxs("div",{className:"error-message",children:["Error: ",i]});const re=()=>e.jsxs("div",{className:"gender-toggle",ref:l,children:[e.jsx("button",{ref:g,className:`gender-button ${L==="female"?"active":""}`,onClick:()=>$("female"),children:"Female"}),e.jsx("button",{ref:k,className:`gender-button ${L==="male"?"active":""}`,onClick:()=>$("male"),children:"Male"}),e.jsx("div",{className:"gender-line",ref:w})]}),ie=()=>e.jsxs("div",{className:"view-toggle-buttons",children:[!S&&e.jsx("button",{onClick:()=>V("front"),className:"flipper",children:"Front"}),!q&&e.jsx("button",{onClick:()=>V("back"),className:"flipper",children:"Back"}),!z&&e.jsx("button",{onClick:()=>V("face"),className:"flipper",children:"Face"})]}),ce=()=>P?null:H?e.jsxs("div",{className:"consultation-form",children:[e.jsx("h5",{children:"Complete your Consultation"}),e.jsxs("form",{onSubmit:te,children:[e.jsxs("div",{children:[e.jsxs("div",{className:"form-row",style:{width:"95%"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"firstName",children:"First Name"}),e.jsx("input",{type:"text",id:"firstName",name:"firstName",value:A.firstName||"",onChange:F,required:!0,placeholder:"Enter your first name"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"lastName",children:"Last Name"}),e.jsx("input",{type:"text",id:"lastName",name:"lastName",value:A.lastName||"",onChange:F,required:!0,placeholder:"Enter your last name"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"email",children:"Email"}),e.jsx("input",{type:"email",id:"email",name:"email",value:A.email,onChange:F,required:!0,placeholder:"Enter your email"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"phone",children:"Phone"}),e.jsx("input",{type:"tel",id:"phone",name:"phone",value:A.phone,onChange:F,required:!0,placeholder:"Enter your phone number"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"location",children:"Choose Location"}),e.jsxs("select",{id:"location",name:"location",value:A.location||"",onChange:F,required:!0,children:[e.jsx("option",{value:"",children:"Select a location"}),e.jsx("option",{value:"New York",children:"Bel Air, MD"}),e.jsx("option",{value:"New York",children:"Bridgewater, NJ"}),e.jsx("option",{value:"New York",children:"Denville, NJ"}),e.jsx("option",{value:"New York",children:"Frederick, MD"}),e.jsx("option",{value:"New York",children:"Hoboken, NJ"}),e.jsx("option",{value:"Los Angeles",children:"Jersey City, NJ"}),e.jsx("option",{value:"Chicago",children:"Lancaster, PA"}),e.jsx("option",{value:"New York",children:"Montclair, NJ"}),e.jsx("option",{value:"New York",children:"Old Bridge, NJ"}),e.jsx("option",{value:"Los Angeles",children:"Red Bank, NJ"}),e.jsx("option",{value:"Chicago",children:"Ridgewood, NJ"}),e.jsx("option",{value:"New York",children:"Scarsdale, NY"}),e.jsx("option",{value:"New York",children:"Short Hills, NJ"}),e.jsx("option",{value:"Los Angeles",children:"Tribeca, NY"}),e.jsx("option",{value:"Chicago",children:"Waldorf, MD"})]})]}),e.jsxs("div",{className:"form-group checkbox-group",children:[e.jsx("input",{type:"checkbox",id:"consent",name:"consent",checked:A.consent||!1,onChange:F,required:!0,style:{background:"red!important"}}),e.jsxs("label",{htmlFor:"consent",className:"consent-text",children:["I agree to receiving appointment confirmations, reminders and marketing communications via email and SMS messages. Msg & data rates may apply. Msg frequency varies. Reply HELP for help and STOP to cancel. View our"," ",e.jsx("a",{href:"/#",children:"Privacy Policy"})]})]}),e.jsx("input",{type:"hidden",name:"areas",value:A.areas}),e.jsx("input",{type:"hidden",name:"conditions",value:A.conditions})]}),e.jsx("div",{className:"form-actions",children:e.jsx("button",{type:"submit",className:"area-button",disabled:C,children:C?"Submitting...":"SEE RESULTS"})})]})]}):W&&d.length>0?e.jsxs("div",{className:"selected-body-conditions",children:[e.jsx("h3",{className:"quiz-card-header-text",children:"Your Selections"}),e.jsx("div",{className:"body-parts-scroll-container",children:d.map(t=>e.jsxs("div",{className:"body-part-section",children:[e.jsx("p",{className:"body-part-name",children:e.jsx("strong",{children:t.area.name})}),t.conditions.length>0?e.jsx("ul",{className:"conditions-list",children:t.conditions.map(s=>e.jsxs("li",{children:[s.title," ",e.jsx("span",{className:"delete-icon",onClick:a=>{a.stopPropagation(),ne(t.area.id,s.id)},children:"Ã—"})]},s.id))}):e.jsx("p",{className:"no-conditions",children:"No conditions selected"})]},t.area.id))}),e.jsx("button",{onClick:ee,className:"area-button",disabled:d.reduce((t,s)=>t+s.conditions.length,0)===0,children:"COMPLETE CONSULTATION"})]}):o?e.jsx("div",{className:"condition-container",children:C?e.jsx("div",{className:"spinner-container",children:e.jsx(pe,{})}):e.jsxs(e.Fragment,{children:[e.jsx(fe,{bodypart:o.name,conditions:y,onSelect:se,selectedConditions:ae()}),y.length>0&&e.jsx("button",{onClick:K,className:"area-button",children:"ADD CONCERNS"})]})}):e.jsxs("div",{className:"start",children:[e.jsx("h3",{className:"quiz-card-header-text",children:"Your Selections"}),e.jsx("span",{className:"quiz-card-desc-text",children:"Start your quiz by clicking on a body part you want to be treated."})]});return e.jsxs(e.Fragment,{children:[!P&&e.jsxs("div",{className:"quiz-main-grid",children:[e.jsxs("div",{className:"view-toggle-container",children:[e.jsx("div",{className:"button-toggles",children:ie()}),e.jsxs("div",{className:"body-map-wrapper",children:[e.jsx(ge,{viewType:S?"front":q?"back":z?"face":"front",selectedAreas:x.map(t=>t.name),onAreaSelect:t=>{if(Array.isArray(c)){const s=T(c,t);s&&X(s)}},showFrontView:S,showBackView:q,showFaceView:z,gender:L}),re(),x.length===0&&e.jsxs("div",{className:"mobile-instruction",children:[e.jsx("h3",{className:"quiz-card-header-text",children:"Your Selections"}),e.jsx("span",{className:"quiz-card-desc-text",children:"Start your quiz by clicking on a body part you want to be treated."})]})]})]}),e.jsx(ve,{isOpen:G,onClose:()=>O(!1),children:ce()})]}),P&&e.jsx(je,{selectedBodyParts:d,resetQuiz:oe})]})},be=()=>e.jsx(Ce,{});export{be as default};
