import{R as M,j as e,r as l}from"./index-BSi7cstz.js";const Y="/assets/body-front-pOEcJjsO.svg",Q=({areasResponse:o,onSelect:d,selectedAreas:u,isLoading:m=!1,showFrontView:t})=>{const[h,j]=M.useState(null),v=()=>{if(m)return[];if(!Array.isArray(o))return[];if(o.length<2)return[];const r=t?o[1]:o[0];return(r==null?void 0:r.children)||[]},c=M.useMemo(()=>v(),[o,t,m,v]),g=r=>{r.count===0?j(`No conditions available for ${r.name}.`):(j(null),d(r))};return m?e.jsxs("div",{className:"area-selection-loading",children:[e.jsx("div",{className:"loading-animation"}),e.jsx("p",{children:"Loading body areas..."})]}):Array.isArray(o)?e.jsxs("div",{className:"area-selection-container",children:[h&&e.jsx("div",{className:"info-message",children:h}),e.jsxs("div",{className:"area-selection-grid",children:[c.length>0?c.map(r=>e.jsx("button",{onClick:()=>g(r),className:`area-button ${u.some(f=>f.id===r.id)?"active":""}`,children:e.jsx("span",{className:"area-name",children:r.name})},r.id)):e.jsx("div",{className:"empty-state",children:e.jsxs("p",{children:["No ",t?"front":"back"," areas available"]})}),e.jsx("img",{src:Y,alt:"FrontBody"})]})]}):e.jsxs("div",{className:"area-selection-error",children:[e.jsx("div",{className:"error-icon",children:"!"}),e.jsx("p",{className:"error-message",children:o.message}),e.jsx("button",{className:"retry-button",onClick:()=>window.location.reload(),children:"Try Again"})]})},_=({conditions:o=[],bodypart:d,onSelect:u,selectedConditions:m})=>!o||o.length===0?e.jsx("div",{className:"condition-empty-state",children:"No conditions available for this body part"}):e.jsxs("div",{className:"condition-container",children:[e.jsxs("h3",{className:"concerns-header-text",children:[d," Concerns"]}),e.jsx("div",{className:"condition-grid",children:o.map(t=>e.jsx("div",{className:`condition-item ${m.some(h=>h.id===t.id)?"selected":""}`,onClick:()=>u(t),children:e.jsxs("div",{className:"condition-content",children:[e.jsx("span",{className:"condition-title",children:t.title}),e.jsxs("span",{className:`custom-checkbox ${m.some(h=>h.id===t.id)?"checked":""}`,children:[" ",m.some(h=>h.id===t.id)&&e.jsx("svg",{className:"check-icon",xmlns:"http://www.w3.org/2000/svg",width:"10",height:"10",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"20 6 9 17 4 12"})})]})]})},t.id))})]}),V=({services:o})=>e.jsx("div",{className:"service-recommendations",children:e.jsx("div",{className:"service-grid",children:o.map(d=>e.jsxs("div",{className:"service-card",children:[d.taxonomy&&d.taxonomy.length>0&&e.jsx("div",{className:"service-tags",children:d.taxonomy.map(u=>e.jsx("span",{className:"tag",children:u.name},u.id))}),e.jsx("h3",{children:d.title})]},d.id))})}),J=()=>{const[o,d]=l.useState([]),[u,m]=l.useState([]),[t,h]=l.useState(null),[j,v]=l.useState([]),[c,g]=l.useState([]),[r,f]=l.useState(!0),[E,T]=l.useState(null),[y,q]=l.useState(!0),[z,S]=l.useState(!1),[F,k]=l.useState(!1),[C,A]=l.useState(null),[x,D]=l.useState({name:"",email:"",phone:"",areas:"",conditions:"",consent:!1}),P=async()=>{var n,s;f(!0);try{const a=await fetch("https://evolvequizdev.wpengine.com/wp-json/wp-evolve-body-quiz/v1/areas",{headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include"});if(!a.ok){const p=await a.json();throw new Error(p.message||"Failed to fetch areas")}const i=await a.json();d(i),q(((s=(n=i[1])==null?void 0:n.children)==null?void 0:s.length)>0)}catch(a){const i=a instanceof Error?a.message:"Unknown error";d({message:i}),T(i)}finally{f(!1)}},O=async n=>{f(!0);try{const s=await fetch(`https://evolvequizdev.wpengine.com/wp-json/wp-evolve-body-quiz/v1/conditions?area=${n}`,{headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include"});if(!s.ok){const i=await s.json();throw new Error(i.message||"Failed to fetch conditions")}const a=await s.json();v(a||[])}catch(s){const a=s instanceof Error?s.message:"Failed to load conditions";T(a),v([])}finally{f(!1)}};l.useEffect(()=>{P()},[]),l.useEffect(()=>{t&&O(t.id)},[t]);const I=n=>{h(n),u.some(s=>s.id===n.id)||m(s=>[...s,n])},L=()=>{q(!y),h(null)},B=()=>{if(t&&j.length>0){const n=c.findIndex(s=>s.area.id===t.id);n>=0?g(s=>s.map((a,i)=>i===n?{...a,conditions:[...a.conditions]}:a)):g(s=>[...s,{area:t,conditions:[]}])}S(!0)},U=()=>{k(!0),A(null)};l.useEffect(()=>{c.length>0&&D(n=>({...n,areas:c.map(s=>s.area.name).join(", "),conditions:c.flatMap(s=>s.conditions.map(a=>a.title)).join(", ")}))},[c]);const b=n=>{const{name:s,value:a}=n.target;D(i=>({...i,[s]:a}))},$=n=>{n.preventDefault();const s=new Date().toLocaleString(),a=c.map(i=>({bodyArea:i.area.name,conditions:i.conditions.map(p=>p.title),services:i.conditions.flatMap(p=>{var w;return((w=p.recommended_services)==null?void 0:w.map(N=>N.title))||[]})}));A({...x,date:s,groupedData:a}),k(!1),S(!1)},H=n=>{t&&g(s=>{const a=s.findIndex(i=>i.area.id===t.id);return a>=0?s.map((i,p)=>{if(p===a){const w=i.conditions.some(N=>N.id===n.id);return{...i,conditions:w?i.conditions.filter(N=>N.id!==n.id):[...i.conditions,n]}}return i}):[...s,{area:t,conditions:[n]}]})},R=()=>{if(!t)return[];const n=c.find(s=>s.area.id===t.id);return n?n.conditions:[]};return r?e.jsx("div",{className:"loading-spinner",children:"Loading quiz data..."}):E?e.jsxs("div",{className:"error-message",children:["Error: ",E]}):e.jsxs("div",{className:"quiz-main-grid",children:[e.jsxs("div",{className:"quiz-content-area",children:[!C&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"view-toggle-container",children:[e.jsx(Q,{areasResponse:o,onSelect:I,selectedAreas:u,isLoading:r,showFrontView:y}),e.jsx("div",{onClick:L,className:"flipper",children:y?"Back":"Front"})]})}),C&&e.jsxs("div",{className:"submission-card",children:[e.jsxs("div",{className:"card-header",children:[e.jsx("h3",{style:{textAlign:"center"},children:"Your Recommendations Are In!"}),e.jsx("p",{style:{textAlign:"center"},children:"Here is what we suggest based on your skin + body goals:"}),e.jsx("div",{className:"grouped-data",children:c.map(n=>e.jsxs("div",{className:"body-part-group",children:[e.jsx("div",{className:"body-part-header",children:e.jsx("span",{className:"body-part-name",children:n.area.name})}),n.conditions.length>0&&e.jsx(e.Fragment,{children:n.conditions.some(s=>{var a;return((a=s.recommended_services)==null?void 0:a.length)>0})&&e.jsx("div",{className:"services-group",children:e.jsx(V,{services:n.conditions.flatMap(s=>s.recommended_services||[])})})})]},n.area.id))})]}),e.jsxs("div",{className:"card-footer",children:[e.jsx("button",{className:"link",onClick:()=>{A(null),m([]),g([]),h(null),S(!1),k(!1)},children:"Take the quiz again"}),e.jsx("button",{className:"area-button",onClick:()=>{},children:"Book Appointment"})]})]})]}),e.jsxs("div",{className:"selection-panel",children:[e.jsx("h3",{className:"quiz-card-header-text",children:"Your Selections"}),e.jsx("span",{className:"quiz-card-desc-text",children:"Start your quiz by clicking on a body part you want to be treated."}),e.jsxs(e.Fragment,{children:[t&&e.jsx(_,{bodypart:t.name,conditions:j,onSelect:H,selectedConditions:R()}),t&&j.length>0&&!z&&!F&&!C&&e.jsx("button",{onClick:B,className:"area-button",style:{marginTop:"60px"},children:"ADD TREATMENTS"})]}),z&&c.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"quiz-card-header-text",children:["Your Selections (",c.reduce((n,s)=>n+s.conditions.length,0),")"," "]}),c.map(n=>e.jsxs("div",{className:"body-part-section",children:[e.jsx("p",{className:"body-part-name",children:e.jsx("strong",{children:n.area.name})}),n.conditions.length>0?e.jsx("ul",{className:"conditions-list",children:n.conditions.map(s=>e.jsxs("li",{children:[s.title," ",e.jsx("span",{className:"delete-icon",children:"Ã—"})]},s.id))}):e.jsx("p",{className:"no-conditions",children:"No conditions selected"})]},n.area.id)),e.jsx("button",{onClick:U,className:"area-button",disabled:c.reduce((n,s)=>n+s.conditions.length,0)===0,children:"COMPLETE CONSULTATION"})]}),F&&e.jsx("div",{className:"consultation-form",children:e.jsxs("div",{className:"form-container",children:[e.jsx("h3",{children:"Complete your consultation"}),e.jsxs("form",{onSubmit:$,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"name",children:"Name"}),e.jsx("input",{type:"text",id:"name",name:"name",value:x.name,onChange:b,required:!0,placeholder:"Enter your full name"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"email",children:"Email"}),e.jsx("input",{type:"email",id:"email",name:"email",value:x.email,onChange:b,required:!0,placeholder:"Enter your email"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"phone",children:"Phone"}),e.jsx("input",{type:"tel",id:"phone",name:"phone",value:x.phone,onChange:b,required:!0,placeholder:"Enter your phone number"})]}),e.jsxs("div",{className:"form-group checkbox-group",children:[e.jsx("input",{type:"checkbox",id:"consent",name:"consent",checked:x.consent||!1,onChange:b,required:!0}),e.jsxs("label",{htmlFor:"consent",className:"consent-text",children:["I agree to receiving appointment confirmations, reminders and marketing communications via email and SMS messages. Msg & data rates may apply. Msg frequency varies. Reply HELP for help and STOP to cancel. View our"," ",e.jsx("a",{href:"/privacy-policy",children:"Privacy Policy"})]})]}),e.jsx("input",{type:"hidden",name:"areas",value:x.areas}),e.jsx("input",{type:"hidden",name:"conditions",value:x.conditions}),e.jsx("div",{className:"form-actions",children:e.jsx("button",{type:"submit",className:"area-button",disabled:r,children:r?"Submitting...":"COMPLETE CONSULTATION"})})]})]})})]})]})},W=()=>e.jsxs("div",{className:"home-page",children:[e.jsxs("main",{className:"main-content",children:[e.jsxs("section",{className:"intro-section",children:[e.jsxs("div",{className:"header-content",children:[e.jsx("p",{className:"subtitle",children:"Take out the guess work on your goals"}),e.jsx("h1",{children:"TAKE OUR AESTHETICS QUIZ"})]}),e.jsxs("div",{className:"container",children:[e.jsx("p",{className:"subtitle-text",children:"Everyone has a dream of what their best self looks like. Take our aesthetic quiz to find out what our expert providers would suggest to meet you goals. This information will help yourself as well as our team better understand your goals and create a treatment plan specifically for you!"}),e.jsx("div",{className:"view-toggle-container",children:e.jsx("button",{className:"view-toggle",children:"Take The Quiz"})})]})]}),e.jsx("section",{className:"quiz-container-section",children:e.jsx("div",{className:"quiz-wrapper",children:e.jsx(J,{})})}),e.jsx("section",{className:"info-section",children:e.jsxs("div",{className:"container",children:[e.jsx("h2",{children:"About Our Treatments"}),e.jsx("p",{children:"Our clinic specializes in advanced aesthetic treatments tailored to your unique needs. The recommendations provided by this quiz are based on our most popular and effective treatment options."}),e.jsxs("div",{className:"features-grid",children:[e.jsxs("div",{className:"feature",children:[e.jsx("h3",{children:"Expert Care"}),e.jsx("p",{children:"All treatments performed by certified professionals"})]}),e.jsxs("div",{className:"feature",children:[e.jsx("h3",{children:"Personalized Approach"}),e.jsx("p",{children:"Customized treatment plans for optimal results"})]}),e.jsxs("div",{className:"feature",children:[e.jsx("h3",{children:"Cutting-Edge Technology"}),e.jsx("p",{children:"Using the latest techniques and equipment"})]})]})]})})]}),e.jsx("footer",{className:"quiz-footer",children:e.jsxs("div",{className:"container",children:[e.jsxs("p",{children:["Â© ",new Date().getFullYear()," Evolve Med Spa. All rights reserved."]}),e.jsxs("div",{className:"footer-links",children:[e.jsx("a",{href:"/privacy",children:"Privacy Policy"}),e.jsx("a",{href:"/terms",children:"Terms of Service"}),e.jsx("a",{href:"/contact",children:"Contact Us"})]})]})})]});export{W as default};
