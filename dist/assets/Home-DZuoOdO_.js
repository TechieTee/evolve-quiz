import{R as I,j as e,r as o}from"./index-kBUU87Fl.js";const $="/assets/body-front-pOEcJjsO.svg",ee="/assets/body-back-hnvoDlEn.svg",se="/assets/face-B75LMB1l.svg",ne=({areasResponse:a,onSelect:h,selectedAreas:c,isLoading:x=!1,showFrontView:t,showBackView:i,showFaceView:v})=>{const[C,j]=I.useState(null),l=()=>{if(x)return[];if(!Array.isArray(a))return[];let r;return t?r=a.find(N=>N.slug==="front"):i?r=a.find(N=>N.slug==="back"):v&&(r=a.find(N=>N.slug==="face")),(r==null?void 0:r.children)||[]},d=I.useMemo(()=>l(),[a,t,i,v,x]),p=()=>t?"Front of Body":i?"Back of Body":v?"Face Areas":"Body Areas",g=()=>t?$:i?ee:v?se:$,f=r=>{r.count===0?j(`No conditions available for ${r.name}.`):(j(null),h(r))};return x?e.jsxs("div",{className:"area-selection-loading",children:[e.jsx("div",{className:"loading-animation"}),e.jsx("p",{children:"Loading body areas..."})]}):Array.isArray(a)?e.jsxs("div",{className:"area-selection-container",children:[C&&e.jsx("div",{className:"info-message",children:C}),e.jsx("div",{className:"area-selection-grid",children:d.length>0?d.map(r=>e.jsx("button",{onClick:()=>f(r),className:`area-button ${c.some(N=>N.id===r.id)?"active":""}`,children:e.jsx("span",{className:"area-name",children:r.name})},r.id)):e.jsx("div",{className:"empty-state",children:e.jsxs("p",{children:["No ",p().toLowerCase()," available"]})})}),e.jsx("img",{src:g(),alt:p(),className:`body-image ${v?"face-image":""}`})]}):e.jsxs("div",{className:"area-selection-error",children:[e.jsx("div",{className:"error-icon",children:"!"}),e.jsx("p",{className:"error-message",children:a.message}),e.jsx("button",{className:"retry-button",onClick:()=>window.location.reload(),children:"Try Again"})]})},te=({conditions:a=[],bodypart:h,onSelect:c,selectedConditions:x})=>!a||a.length===0?e.jsx("div",{className:"condition-empty-state",children:"No conditions available for this body part"}):e.jsxs("div",{className:"condition-container",children:[e.jsxs("h3",{className:"concerns-header-text",children:[h," Concerns"]}),e.jsx("div",{className:"condition-grid",children:a.map(t=>e.jsx("div",{className:`condition-item ${x.some(i=>i.id===t.id)?"selected":""}`,onClick:()=>c(t),children:e.jsxs("div",{className:"condition-content",children:[e.jsx("span",{className:"condition-title",children:t.title}),e.jsxs("span",{className:`custom-checkbox ${x.some(i=>i.id===t.id)?"checked":""}`,children:[" ",x.some(i=>i.id===t.id)&&e.jsx("svg",{className:"check-icon",xmlns:"http://www.w3.org/2000/svg",width:"10",height:"10",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"20 6 9 17 4 12"})})]})]})},t.id))})]});/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=a=>a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),re=a=>a.replace(/^([A-Z])|[\s-_]+(\w)/g,(h,c,x)=>x?x.toUpperCase():c.toLowerCase()),O=a=>{const h=re(a);return h.charAt(0).toUpperCase()+h.slice(1)},P=(...a)=>a.filter((h,c,x)=>!!h&&h.trim()!==""&&x.indexOf(h)===c).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ie={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=o.forwardRef(({color:a="currentColor",size:h=24,strokeWidth:c=2,absoluteStrokeWidth:x,className:t="",children:i,iconNode:v,...C},j)=>o.createElement("svg",{ref:j,...ie,width:h,height:h,stroke:a,strokeWidth:x?Number(c)*24/Number(h):c,className:P("lucide",t),...C},[...v.map(([l,d])=>o.createElement(l,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=(a,h)=>{const c=o.forwardRef(({className:x,...t},i)=>o.createElement(oe,{ref:i,iconNode:h,className:P(`lucide-${ae(O(a))}`,`lucide-${a}`,x),...t}));return c.displayName=O(a),c};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],le=R("arrow-left",ce);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],me=R("arrow-right",de),ue=({selectedBodyParts:a,resetQuiz:h})=>{const[c,x]=o.useState([]),t=o.useRef([]),i=(l,d)=>{var g;const p=t.current[l];if(p){const f=((g=p.children[0])==null?void 0:g.clientWidth)||0;p.scrollTo({left:d*(f+40),behavior:"smooth"}),C(l,d)}},v=l=>{var p;const d=t.current[l];if(d){const g=((p=d.children[0])==null?void 0:p.clientWidth)||0,f=Math.round(d.scrollLeft/(g+40));C(l,f)}},C=(l,d)=>{x(p=>{const g=[...p];return g[l]=d,g})},j=(l,d)=>{const p=c[l]||0,g=t.current[l];if(!g)return;const f=g.children.length,r=d==="prev"?Math.max(0,p-1):Math.min(f-1,p+1);i(l,r)};return e.jsx("main",{className:"recommendations",children:e.jsxs("div",{className:"container",children:[e.jsxs("header",{className:"header",children:[e.jsx("h1",{className:"title",children:"Your Recommendations Are In!"}),e.jsx("p",{className:"subtitle",children:"Here is what we suggest based on your skin + body goals"}),e.jsxs("div",{className:"button-group",children:[e.jsx("button",{className:"link-button",onClick:h,children:"Take the quiz again"}),e.jsx("button",{className:"appointment-button",children:"Book Appointment"})]})]}),a.map((l,d)=>e.jsxs("div",{children:[e.jsx("h2",{className:"body-part-title",children:l.area.name}),l.conditions.map((p,g)=>{var N;const f=d*100+g,r=((N=p.recommended_services)==null?void 0:N.map(b=>{var y;return{category:((y=b.taxonomy[0])==null?void 0:y.name)||"SERVICE",title:b.title,description:b.description||"Description..."}}))||[];return c[f]===void 0&&(c[f]=0),e.jsxs("section",{className:"treatment-section",children:[e.jsx("div",{className:"section-header",children:e.jsx("h2",{className:"section-title",children:p.title})}),r.length>0?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"carousel",children:[e.jsx("div",{className:"carousel-content",ref:b=>{t.current[f]=b},onScroll:()=>v(f),children:r.map((b,y)=>e.jsx("div",{className:"carousel-item",children:e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-content",children:[e.jsx("span",{className:"badge",children:b.category}),e.jsx("h3",{className:"treatment-title",children:b.title}),e.jsx("p",{className:"treatment-description",children:b.description})]})})},y))}),e.jsxs("div",{className:"carousel-navigation",children:[e.jsx("button",{className:"carousel-prev",onClick:()=>j(f,"prev"),disabled:c[f]===0,children:e.jsx(le,{className:"w-5 h-5",color:"black"})}),e.jsx("button",{className:"carousel-next",onClick:()=>j(f,"next"),disabled:c[f]===r.length-1,children:e.jsx(me,{className:"w-5 h-5",color:"black"})})]}),e.jsx("div",{className:"dots-navigation",children:r.map((b,y)=>e.jsx("div",{className:`dot ${y===c[f]?"active":""}`,onClick:()=>i(f,y)},y))})]})}):e.jsx("p",{className:"no-treatments",children:"No treatments recommended for this condition"})]},g)})]},d))]})})},he=()=>{const[a,h]=o.useState([]),[c,x]=o.useState([]),[t,i]=o.useState(null),[v,C]=o.useState([]),[j,l]=o.useState([]),[d,p]=o.useState(!0),[g,f]=o.useState(null),[r,N]=o.useState(!0),[b,y]=o.useState(!1),[B,T]=o.useState(!1),[_,A]=o.useState(!1),[W,E]=o.useState(!1),[L,M]=o.useState(null),[S,D]=o.useState({name:"",email:"",phone:"",areas:"",conditions:"",consent:!1}),U=async()=>{var n,s;p(!0);try{const m=await fetch("https://evolvequizdev.wpengine.com/wp-json/wp-evolve-body-quiz/v1/areas",{headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include"});if(!m.ok){const w=await m.json();throw new Error(w.message||"Failed to fetch areas")}const u=await m.json();h(u),N(((s=(n=u[1])==null?void 0:n.children)==null?void 0:s.length)>0)}catch(m){const u=m instanceof Error?m.message:"Unknown error";h({message:u}),f(u)}finally{p(!1)}},H=async n=>{p(!0);try{const s=await fetch(`https://evolvequizdev.wpengine.com/wp-json/wp-evolve-body-quiz/v1/conditions?area=${n}`,{headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include"});if(!s.ok){const u=await s.json();throw new Error(u.message||"Failed to fetch conditions")}const m=await s.json();C(m||[])}catch(s){const m=s instanceof Error?s.message:"Failed to load conditions";f(m),C([])}finally{p(!1)}};o.useEffect(()=>{U()},[]),o.useEffect(()=>{t&&H(t.id)},[t]);const Y=n=>{i(n),A(!1),E(!1),c.some(s=>s.id===n.id)||x(s=>[...s,n])},z=n=>{N(n==="front"),y(n==="back"),T(n==="face"),i(null),A(!1),E(!1)},Q=()=>{if(t&&v.length>0){const n=j.findIndex(s=>s.area.id===t.id);n>=0?l(s=>s.map((m,u)=>u===n?{...m,conditions:[...m.conditions]}:m)):l(s=>[...s,{area:t,conditions:[]}])}A(!0),i(null)},Z=()=>{E(!0),M(null)};o.useEffect(()=>{j.length>0&&D(n=>({...n,areas:j.map(s=>s.area.name).join(", "),conditions:j.flatMap(s=>s.conditions.map(m=>m.title)).join(", ")}))},[j]);const F=n=>{const{name:s,value:m,type:u,checked:w}=n.target;D(k=>({...k,[s]:u==="checkbox"?w:m}))},J=n=>{n.preventDefault();const s=new Date().toLocaleString(),m=j.map(u=>({bodyArea:u.area.name,conditions:u.conditions.map(w=>w.title),services:u.conditions.flatMap(w=>{var k;return((k=w.recommended_services)==null?void 0:k.map(q=>q.title))||[]})}));M({...S,date:s,groupedData:m}),E(!1),A(!1)},K=n=>{t&&l(s=>{const m=s.findIndex(u=>u.area.id===t.id);return m>=0?s.map((u,w)=>{if(w===m){const k=u.conditions.some(q=>q.id===n.id);return{...u,conditions:k?u.conditions.filter(q=>q.id!==n.id):[...u.conditions,n]}}return u}):[...s,{area:t,conditions:[n]}]})},G=()=>{if(!t)return[];const n=j.find(s=>s.area.id===t.id);return n?n.conditions:[]},V=()=>{M(null),x([]),l([]),i(null),A(!1),E(!1),N(!0),y(!1),T(!1)};if(g)return e.jsxs("div",{className:"error-message",children:["Error: ",g]});const X=()=>L?null:W?e.jsx("div",{className:"consultation-form",children:e.jsxs("div",{className:"form-container",children:[e.jsx("h3",{children:"Complete your Consultation"}),e.jsxs("form",{onSubmit:J,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"name",children:"Name"}),e.jsx("input",{type:"text",id:"name",name:"name",value:S.name,onChange:F,required:!0,placeholder:"Enter your full name"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"email",children:"Email"}),e.jsx("input",{type:"email",id:"email",name:"email",value:S.email,onChange:F,required:!0,placeholder:"Enter your email"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"phone",children:"Phone"}),e.jsx("input",{type:"tel",id:"phone",name:"phone",value:S.phone,onChange:F,required:!0,placeholder:"Enter your phone number"})]}),e.jsxs("div",{className:"form-group checkbox-group",children:[e.jsx("input",{type:"checkbox",id:"consent",name:"consent",checked:S.consent||!1,onChange:F,required:!0}),e.jsxs("label",{htmlFor:"consent",className:"consent-text",children:["I agree to receiving appointment confirmations, reminders and marketing communications via email and SMS messages. Msg & data rates may apply. Msg frequency varies. Reply HELP for help and STOP to cancel. View our"," ",e.jsx("a",{href:"/#",children:"Privacy Policy"})]})]}),e.jsx("input",{type:"hidden",name:"areas",value:S.areas}),e.jsx("input",{type:"hidden",name:"conditions",value:S.conditions}),e.jsx("div",{className:"form-actions",children:e.jsx("button",{type:"submit",className:"area-button",disabled:d,children:d?"Submitting...":"COMPLETE CONSULTATION"})})]})]})}):_&&j.length>0?e.jsxs("div",{children:[e.jsx("h3",{className:"quiz-card-header-text",children:"Your Selections"}),j.map(n=>e.jsxs("div",{className:"body-part-section",children:[e.jsx("p",{className:"body-part-name",children:e.jsx("strong",{children:n.area.name})}),n.conditions.length>0?e.jsx("ul",{className:"conditions-list",children:n.conditions.map(s=>e.jsxs("li",{children:[s.title," ",e.jsx("span",{className:"delete-icon",children:"×"})]},s.id))}):e.jsx("p",{className:"no-conditions",children:"No conditions selected"})]},n.area.id)),e.jsx("button",{onClick:Z,className:"area-button",disabled:j.reduce((n,s)=>n+s.conditions.length,0)===0,children:"COMPLETE CONSULTATION"})]}):t?d?e.jsx("div",{className:"loading-spinner",children:"Loading quiz data..."}):e.jsxs(e.Fragment,{children:[e.jsx(te,{bodypart:t.name,conditions:v,onSelect:K,selectedConditions:G()}),v.length>0&&e.jsx("button",{onClick:Q,className:"area-button",style:{marginTop:"60px"},children:"ADD TREATMENTS"})]}):e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"quiz-card-header-text",children:"Your Selections"}),e.jsx("span",{className:"quiz-card-desc-text",children:"Start your quiz by clicking on a body part you want to be treated."})]});return e.jsxs(e.Fragment,{children:[!L&&e.jsxs("div",{className:"quiz-main-grid",children:[e.jsx("div",{className:"quiz-content-area",children:e.jsxs("div",{className:"view-toggle-container",children:[e.jsx(ne,{areasResponse:a,onSelect:Y,selectedAreas:c,isLoading:d,showFrontView:r,showBackView:b,showFaceView:B}),e.jsxs("div",{className:"view-toggle-buttons",children:[!r&&e.jsx("button",{onClick:()=>z("front"),className:"flipper",children:"Front"}),!b&&e.jsx("button",{onClick:()=>z("back"),className:"flipper",children:"Back"}),!B&&e.jsx("button",{onClick:()=>z("face"),className:"flipper",children:"Face"})]})]})}),e.jsx("div",{className:"selection-panel",children:X()})]}),L&&e.jsx(ue,{selectedBodyParts:j,resetQuiz:V})]})},xe=()=>e.jsx("div",{className:"home-page",children:e.jsx("main",{className:"main-content",children:e.jsx("section",{className:"quiz-container-section",children:e.jsx("div",{className:"quiz-wrapper",children:e.jsx(he,{})})})})});export{xe as default};
