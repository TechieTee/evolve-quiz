import{R as g,j as e,r as l}from"./index-B0QL693r.js";const b=({areasResponse:n,onSelect:i,selectedArea:r,isLoading:c=!1,showFrontView:x})=>{const N=s=>c?[]:s?Array.isArray(s)?s:[]:[],j=s=>Array.isArray(s)?s.reduce((t,o)=>{var p;return o&&(t.push({...o}),(p=o.children)!=null&&p.length&&t.push(...j(o.children))),t},[]):[],u=N(n),d=g.useMemo(()=>j(u),[u]),f=d.some(s=>s.count===0),v=g.useMemo(()=>{if(x)return d.filter(s=>s.count===1);{const s=d.filter(t=>t.count===0);return s.length>0?s:[]}},[d,x]);return c?e.jsxs("div",{className:"area-selection loading",children:[e.jsx("h2",{children:"Select a Body Area"}),e.jsx("div",{className:"loading-spinner",children:"Loading areas..."})]}):!Array.isArray(n)&&(n!=null&&n.message)?e.jsxs("div",{className:"area-selection error",children:[e.jsx("h2",{children:"Select a Body Area"}),e.jsx("div",{className:"error-message",children:n.message})]}):e.jsxs("div",{className:"area-selection",children:[e.jsxs("h2",{children:["Select a Body Area (",x?"Front":"Back"," View)"]}),v.length>0?e.jsx("div",{className:"area-grid",children:v.map(s=>e.jsxs("button",{onClick:()=>i(s),className:`area-button ${(r==null?void 0:r.id)===s.id?"active":""}`,children:[s.name,e.jsx("span",{className:"count-badge",children:s.id})]},s.id))}):e.jsx("div",{className:"empty-state",children:x?e.jsx("p",{children:"No front areas available"}):f?e.jsx("p",{children:"No back areas available"}):e.jsx("p",{children:"Only front view areas available"})})]})},k=({services:n})=>e.jsxs("div",{className:"service-recommendations",children:[e.jsx("h2",{children:"Recommended Services"}),e.jsx("div",{className:"service-grid",children:n.map(i=>e.jsxs("div",{className:"service-card",children:[i.taxonomy&&i.taxonomy.length>0&&e.jsx("div",{className:"service-tags",children:i.taxonomy.map(r=>e.jsx("span",{className:"tag",children:r.name},r.id))}),e.jsx("h3",{children:i.title}),e.jsx("a",{href:i.link,target:"_blank",rel:"noopener noreferrer",children:"View Details"})]},i.id))})]}),z=({conditions:n,onSelect:i,selectedCondition:r})=>n.length===0?e.jsx("div",{className:"condition-display",children:"No conditions available"}):e.jsxs("div",{className:"condition-display",children:[e.jsx("h2",{children:"Select a Condition"}),e.jsx("div",{className:"condition-list",children:n.map(c=>e.jsxs("div",{className:`condition-card ${(r==null?void 0:r.id)===c.id?"active":""}`,onClick:()=>i(c),children:[e.jsx("h3",{children:c.title}),e.jsx("a",{href:c.link,target:"_blank",rel:"noopener noreferrer",children:"Learn more"})]},c.id))})]}),E=()=>{const[n,i]=l.useState([]),[r,c]=l.useState(null),[x,N]=l.useState([]),[j,u]=l.useState(null),[d,f]=l.useState(!0),[v,s]=l.useState(null),[t,o]=l.useState(!0),p=async()=>{var h;f(!0);try{const a=await fetch("http://evolve.local/wp-json/wp-evolve-body-quiz/v1/areas");if(!a.ok){const A=await a.json();throw new Error(A.message||"Failed to fetch areas")}const m=await a.json();i(m),o(((h=m[0])==null?void 0:h.count)>0)}catch(a){const m=a instanceof Error?a.message:"Unknown error";i({message:m}),s(m)}finally{f(!1)}},y=async h=>{try{const a=await fetch(`http://evolve.local/wp-json/wp-evolve-body-quiz/v1/conditions?area=${h}`);if(!a.ok)throw new Error("Failed to fetch conditions");const m=await a.json();N(m)}catch(a){s(a instanceof Error?a.message:"Failed to load conditions")}};l.useEffect(()=>{p()},[]),l.useEffect(()=>{r&&y(r.id)},[r]);const w=h=>{c(h),u(null),o(h.count>0)},S=()=>{o(!t)};return d?e.jsx("div",{className:"loading-spinner",children:"Loading quiz data..."}):v?e.jsxs("div",{className:"error-message",children:["Error: ",v]}):e.jsxs("div",{className:"evolve-quiz-container",children:[e.jsx("h1",{className:"quiz-card-header-text",children:"Begin Your Treatment Journey"}),e.jsx("div",{className:"view-toggle-container",children:e.jsx("button",{onClick:S,className:`view-toggle ${t?"active":""}`,children:t?"Show Back View":"Show Front View"})}),e.jsx(b,{areasResponse:n,onSelect:w,selectedArea:r,isLoading:d,showFrontView:t}),r&&e.jsx(z,{conditions:x,onSelect:u,selectedCondition:j}),j&&e.jsx(k,{services:j.recommended_services})]})},C=()=>e.jsxs("div",{className:"home-page",children:[e.jsxs("main",{className:"main-content",children:[e.jsxs("section",{className:"intro-section",children:[e.jsxs("div",{className:"header-content",children:[e.jsx("h1",{children:"Evolve Med Spa Body Treatment Quiz"}),e.jsx("p",{className:"subtitle",children:"Discover personalized treatment recommendations based on your specific concerns"})]}),e.jsxs("div",{className:"container",children:[e.jsx("h2",{children:"How It Works"}),e.jsxs("div",{className:"steps-container",children:[e.jsxs("div",{className:"step",children:[e.jsx("div",{className:"step-icon",children:"1"}),e.jsx("h3",{children:"Body Area Selection"}),e.jsx("p",{children:"Choose the area of your body you're interested in treating from the front or back view"})]}),e.jsxs("div",{className:"step",children:[e.jsx("div",{className:"step-icon",children:"2"}),e.jsx("h3",{children:"Identify Your Condition"}),e.jsx("p",{children:"Select the specific condition you'd like to address"})]}),e.jsxs("div",{className:"step",children:[e.jsx("div",{className:"step-icon",children:"3"}),e.jsx("h3",{children:"Get Recommendations"}),e.jsx("p",{children:"Receive personalized service recommendations"})]})]})]})]}),e.jsx("section",{className:"quiz-container-section",children:e.jsx("div",{className:"quiz-wrapper",children:e.jsx(E,{})})}),e.jsx("section",{className:"info-section",children:e.jsxs("div",{className:"container",children:[e.jsx("h2",{children:"About Our Treatments"}),e.jsx("p",{children:"Our clinic specializes in advanced aesthetic treatments tailored to your unique needs. The recommendations provided by this quiz are based on our most popular and effective treatment options."}),e.jsxs("div",{className:"features-grid",children:[e.jsxs("div",{className:"feature",children:[e.jsx("h3",{children:"Expert Care"}),e.jsx("p",{children:"All treatments performed by certified professionals"})]}),e.jsxs("div",{className:"feature",children:[e.jsx("h3",{children:"Personalized Approach"}),e.jsx("p",{children:"Customized treatment plans for optimal results"})]}),e.jsxs("div",{className:"feature",children:[e.jsx("h3",{children:"Cutting-Edge Technology"}),e.jsx("p",{children:"Using the latest techniques and equipment"})]})]})]})})]}),e.jsx("footer",{className:"quiz-footer",children:e.jsxs("div",{className:"container",children:[e.jsxs("p",{children:["Â© ",new Date().getFullYear()," Evolve Med Spa. All rights reserved."]}),e.jsxs("div",{className:"footer-links",children:[e.jsx("a",{href:"/privacy",children:"Privacy Policy"}),e.jsx("a",{href:"/terms",children:"Terms of Service"}),e.jsx("a",{href:"/contact",children:"Contact Us"})]})]})})]});export{C as default};
