import{R as z,j as e,r as p}from"./index-Bx99Z5Lm.js";const Z="/assets/body-front-pOEcJjsO.svg",J=({areasResponse:i,onSelect:m,selectedAreas:o,isLoading:x=!1,showFrontView:n})=>{const[h,g]=z.useState(null),v=()=>{if(x)return[];if(!Array.isArray(i))return[];if(i.length<2)return[];const s=n?i[1]:i[0];return(s==null?void 0:s.children)||[]},j=z.useMemo(()=>v(),[i,n,x,v]),N=s=>{s.count===0?g(`No conditions available for ${s.name}.`):(g(null),m(s))};return x?e.jsxs("div",{className:"area-selection-loading",children:[e.jsx("div",{className:"loading-animation"}),e.jsx("p",{children:"Loading body areas..."})]}):Array.isArray(i)?e.jsxs("div",{className:"area-selection-container",children:[h&&e.jsx("div",{className:"info-message",children:h}),e.jsxs("div",{className:"area-selection-grid",children:[j.length>0?j.map(s=>e.jsx("button",{onClick:()=>N(s),className:`area-button ${o.some(r=>r.id===s.id)?"active":""}`,children:e.jsx("span",{className:"area-name",children:s.name})},s.id)):e.jsx("div",{className:"empty-state",children:e.jsxs("p",{children:["No ",n?"front":"back"," areas available"]})}),e.jsx("img",{src:Z,alt:"FrontBody"})]})]}):e.jsxs("div",{className:"area-selection-error",children:[e.jsx("div",{className:"error-icon",children:"!"}),e.jsx("p",{className:"error-message",children:i.message}),e.jsx("button",{className:"retry-button",onClick:()=>window.location.reload(),children:"Try Again"})]})},K=({conditions:i=[],bodypart:m,onSelect:o,selectedConditions:x})=>!i||i.length===0?e.jsx("div",{className:"condition-empty-state",children:"No conditions available for this body part"}):e.jsxs("div",{className:"condition-container",children:[e.jsxs("h3",{className:"concerns-header-text",children:[m," Concerns"]}),e.jsx("div",{className:"condition-grid",children:i.map(n=>e.jsx("div",{className:`condition-item ${x.some(h=>h.id===n.id)?"selected":""}`,onClick:()=>o(n),children:e.jsxs("div",{className:"condition-content",children:[e.jsx("span",{className:"condition-title",children:n.title}),e.jsxs("span",{className:`custom-checkbox ${x.some(h=>h.id===n.id)?"checked":""}`,children:[" ",x.some(h=>h.id===n.id)&&e.jsx("svg",{className:"check-icon",xmlns:"http://www.w3.org/2000/svg",width:"10",height:"10",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"20 6 9 17 4 12"})})]})]})},n.id))})]});/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),X=i=>i.replace(/^([A-Z])|[\s-_]+(\w)/g,(m,o,x)=>x?x.toUpperCase():o.toLowerCase()),L=i=>{const m=X(i);return m.charAt(0).toUpperCase()+m.slice(1)},D=(...i)=>i.filter((m,o,x)=>!!m&&m.trim()!==""&&x.indexOf(m)===o).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ee={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=p.forwardRef(({color:i="currentColor",size:m=24,strokeWidth:o=2,absoluteStrokeWidth:x,className:n="",children:h,iconNode:g,...v},j)=>p.createElement("svg",{ref:j,...ee,width:m,height:m,stroke:i,strokeWidth:x?Number(o)*24/Number(m):o,className:D("lucide",n),...v},[...g.map(([N,s])=>p.createElement(N,s)),...Array.isArray(h)?h:[h]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=(i,m)=>{const o=p.forwardRef(({className:x,...n},h)=>p.createElement(se,{ref:h,iconNode:m,className:D(`lucide-${G(L(i))}`,`lucide-${i}`,x),...n}));return o.displayName=L(i),o};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],ne=P("arrow-left",te);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],re=P("arrow-right",ae),ie=({selectedBodyParts:i,resetQuiz:m})=>{const[o,x]=p.useState([]),n=p.useRef([]),h=i.map((s,r)=>{const c=s.conditions.flatMap(u=>{var f;return((f=u.recommended_services)==null?void 0:f.map(y=>{var E;return{category:((E=y.taxonomy[0])==null?void 0:E.name)||"SERVICE",title:y.title,description:y.description||"Description..."}}))||[]});return o[r]===void 0&&(o[r]=0),{title:s.conditions.flatMap(u=>u.title||"Condition Title Not Available"),treatments:c}}),g=(s,r)=>{var u;const c=n.current[s];if(c){const f=((u=c.children[0])==null?void 0:u.clientWidth)||0;c.scrollTo({left:r*(f+40),behavior:"smooth"}),j(s,r)}},v=s=>{var c;const r=n.current[s];if(r){const u=((c=r.children[0])==null?void 0:c.clientWidth)||0,f=Math.round(r.scrollLeft/(u+40));j(s,f)}},j=(s,r)=>{x(c=>{const u=[...c];return u[s]=r,u})},N=(s,r)=>{var y;const c=o[s]||0,u=((y=h[s])==null?void 0:y.treatments)||[],f=r==="prev"?Math.max(0,c-1):Math.min(u.length-1,c+1);g(s,f)};return e.jsx("main",{className:"recommendations",children:e.jsxs("div",{className:"container",children:[e.jsxs("header",{className:"header",children:[e.jsx("h1",{className:"title",children:"Your Recommendations Are In!"}),e.jsx("p",{className:"subtitle",children:"Here is what we suggest based on your skin + body goals"}),e.jsxs("div",{className:"button-group",children:[e.jsx("button",{className:"link-button",onClick:m,children:"Take the quiz again"}),e.jsx("button",{className:"appointment-button",children:"Book Appointment"})]})]}),h.map((s,r)=>e.jsxs("section",{className:"treatment-section",children:[e.jsx("div",{className:"section-header",children:e.jsx("h2",{className:"section-title",children:s.title})}),s.treatments.length>0?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"carousel",children:[e.jsx("div",{className:"carousel-content",ref:c=>{n.current[r]=c},onScroll:()=>v(r),children:s.treatments.map((c,u)=>e.jsx("div",{className:"carousel-item",children:e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-content",children:[e.jsx("span",{className:"badge",children:c.category}),e.jsx("h3",{className:"treatment-title",children:c.title}),e.jsx("p",{className:"treatment-description",children:c.description})]})})},u))}),e.jsxs("div",{className:"carousel-navigation",children:[e.jsx("button",{className:"carousel-prev",onClick:()=>N(r,"prev"),disabled:o[r]===0,children:e.jsx(ne,{className:"w-5 h-5",color:"black"})}),e.jsx("button",{className:"carousel-next",onClick:()=>N(r,"next"),disabled:o[r]===s.treatments.length-1,children:e.jsx(re,{className:"w-5 h-5",color:"black"})})]}),e.jsx("div",{className:"dots-navigation",children:s.treatments.map((c,u)=>e.jsx("div",{className:`dot ${u===o[r]?"active":""}`,onClick:()=>g(r,u)},u))})]})}):e.jsx("p",{className:"no-treatments",children:"No treatments recommended for this area"})]},r))]})})},oe=()=>{const[i,m]=p.useState([]),[o,x]=p.useState([]),[n,h]=p.useState(null),[g,v]=p.useState([]),[j,N]=p.useState([]),[s,r]=p.useState(!0),[c,u]=p.useState(null),[f,y]=p.useState(!0),[E,S]=p.useState(!1),[O,k]=p.useState(!1),[F,M]=p.useState(null),[w,T]=p.useState({name:"",email:"",phone:"",areas:"",conditions:"",consent:!1}),$=async()=>{var a,t;r(!0);try{const l=await fetch("https://evolvequizdev.wpengine.com/wp-json/wp-evolve-body-quiz/v1/areas",{headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include"});if(!l.ok){const b=await l.json();throw new Error(b.message||"Failed to fetch areas")}const d=await l.json();m(d),y(((t=(a=d[1])==null?void 0:a.children)==null?void 0:t.length)>0)}catch(l){const d=l instanceof Error?l.message:"Unknown error";m({message:d}),u(d)}finally{r(!1)}},B=async a=>{r(!0);try{const t=await fetch(`https://evolvequizdev.wpengine.com/wp-json/wp-evolve-body-quiz/v1/conditions?area=${a}`,{headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include"});if(!t.ok){const d=await t.json();throw new Error(d.message||"Failed to fetch conditions")}const l=await t.json();v(l||[])}catch(t){const l=t instanceof Error?t.message:"Failed to load conditions";u(l),v([])}finally{r(!1)}};p.useEffect(()=>{$()},[]),p.useEffect(()=>{n&&B(n.id)},[n]);const R=a=>{h(a),S(!1),k(!1),o.some(t=>t.id===a.id)||x(t=>[...t,a])},_=()=>{y(!f),h(null),S(!1),k(!1)},I=()=>{if(n&&g.length>0){const a=j.findIndex(t=>t.area.id===n.id);a>=0?N(t=>t.map((l,d)=>d===a?{...l,conditions:[...l.conditions]}:l)):N(t=>[...t,{area:n,conditions:[]}])}S(!0),h(null)},W=()=>{k(!0),M(null)};p.useEffect(()=>{j.length>0&&T(a=>({...a,areas:j.map(t=>t.area.name).join(", "),conditions:j.flatMap(t=>t.conditions.map(l=>l.title)).join(", ")}))},[j]);const q=a=>{const{name:t,value:l,type:d,checked:b}=a.target;T(C=>({...C,[t]:d==="checkbox"?b:l}))},U=a=>{a.preventDefault();const t=new Date().toLocaleString(),l=j.map(d=>({bodyArea:d.area.name,conditions:d.conditions.map(b=>b.title),services:d.conditions.flatMap(b=>{var C;return((C=b.recommended_services)==null?void 0:C.map(A=>A.title))||[]})}));M({...w,date:t,groupedData:l}),k(!1),S(!1)},H=a=>{n&&N(t=>{const l=t.findIndex(d=>d.area.id===n.id);return l>=0?t.map((d,b)=>{if(b===l){const C=d.conditions.some(A=>A.id===a.id);return{...d,conditions:C?d.conditions.filter(A=>A.id!==a.id):[...d.conditions,a]}}return d}):[...t,{area:n,conditions:[a]}]})},V=()=>{if(!n)return[];const a=j.find(t=>t.area.id===n.id);return a?a.conditions:[]},Y=()=>{M(null),x([]),N([]),h(null),S(!1),k(!1)};if(c)return e.jsxs("div",{className:"error-message",children:["Error: ",c]});const Q=()=>F?null:O?e.jsx("div",{className:"consultation-form",children:e.jsxs("div",{className:"form-container",children:[e.jsx("h3",{children:"Complete your Consultation"}),e.jsxs("form",{onSubmit:U,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"name",children:"Name"}),e.jsx("input",{type:"text",id:"name",name:"name",value:w.name,onChange:q,required:!0,placeholder:"Enter your full name"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"email",children:"Email"}),e.jsx("input",{type:"email",id:"email",name:"email",value:w.email,onChange:q,required:!0,placeholder:"Enter your email"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"phone",children:"Phone"}),e.jsx("input",{type:"tel",id:"phone",name:"phone",value:w.phone,onChange:q,required:!0,placeholder:"Enter your phone number"})]}),e.jsxs("div",{className:"form-group checkbox-group",children:[e.jsx("input",{type:"checkbox",id:"consent",name:"consent",checked:w.consent||!1,onChange:q,required:!0}),e.jsxs("label",{htmlFor:"consent",className:"consent-text",children:["I agree to receiving appointment confirmations, reminders and marketing communications via email and SMS messages. Msg & data rates may apply. Msg frequency varies. Reply HELP for help and STOP to cancel. View our"," ",e.jsx("a",{href:"/#",children:"Privacy Policy"})]})]}),e.jsx("input",{type:"hidden",name:"areas",value:w.areas}),e.jsx("input",{type:"hidden",name:"conditions",value:w.conditions}),e.jsx("div",{className:"form-actions",children:e.jsx("button",{type:"submit",className:"area-button",disabled:s,children:s?"Submitting...":"COMPLETE CONSULTATION"})})]})]})}):E&&j.length>0?e.jsxs("div",{children:[e.jsx("h3",{className:"quiz-card-header-text",children:"Your Selections"}),j.map(a=>e.jsxs("div",{className:"body-part-section",children:[e.jsx("p",{className:"body-part-name",children:e.jsx("strong",{children:a.area.name})}),a.conditions.length>0?e.jsx("ul",{className:"conditions-list",children:a.conditions.map(t=>e.jsxs("li",{children:[t.title," ",e.jsx("span",{className:"delete-icon",children:"×"})]},t.id))}):e.jsx("p",{className:"no-conditions",children:"No conditions selected"})]},a.area.id)),e.jsx("button",{onClick:W,className:"area-button",disabled:j.reduce((a,t)=>a+t.conditions.length,0)===0,children:"COMPLETE CONSULTATION"})]}):n?s?e.jsx("div",{className:"loading-spinner",children:"Loading quiz data..."}):e.jsxs(e.Fragment,{children:[e.jsx(K,{bodypart:n.name,conditions:g,onSelect:H,selectedConditions:V()}),g.length>0&&e.jsx("button",{onClick:I,className:"area-button",style:{marginTop:"60px"},children:"ADD TREATMENTS"})]}):e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"quiz-card-header-text",children:"Your Selections"}),e.jsx("span",{className:"quiz-card-desc-text",children:"Start your quiz by clicking on a body part you want to be treated."})]});return e.jsxs(e.Fragment,{children:[!F&&e.jsxs("div",{className:"quiz-main-grid",children:[e.jsx("div",{className:"quiz-content-area",children:e.jsxs("div",{className:"view-toggle-container",children:[e.jsx(J,{areasResponse:i,onSelect:R,selectedAreas:o,isLoading:s,showFrontView:f}),e.jsx("div",{onClick:_,className:"flipper",children:f?"Back":"Front"})]})}),e.jsx("div",{className:"selection-panel",children:Q()})]}),F&&e.jsx(ie,{selectedBodyParts:j,resetQuiz:Y})]})},le=()=>e.jsx("div",{className:"home-page",children:e.jsx("main",{className:"main-content",children:e.jsx("section",{className:"quiz-container-section",children:e.jsx("div",{className:"quiz-wrapper",children:e.jsx(oe,{})})})})});export{le as default};
