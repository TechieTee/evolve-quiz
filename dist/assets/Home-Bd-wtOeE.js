import{j as e,r as l,R as te}from"./index-B0nzmLey.js";const se=()=>e.jsx("div",{className:"spinner"}),ae=({conditions:o=[],bodypart:f,onSelect:h,selectedConditions:u})=>Array.isArray(o)?!o||o.length===0?e.jsx("div",{className:"condition-empty-state",children:"No conditions available for this body part"}):e.jsxs("div",{className:"condition-grid",children:[e.jsxs("h3",{className:"concerns-header-text",children:[f," Concerns"]}),o.map(r=>e.jsx("div",{className:`condition-item ${u.some(x=>x.id===r.id)?"selected":""}`,onClick:()=>h(r),children:e.jsxs("div",{className:"condition-content",children:[e.jsx("span",{className:"condition-title",children:r.title}),e.jsxs("span",{className:`custom-checkbox ${u.some(x=>x.id===r.id)?"checked":""}`,children:[" ",u.some(x=>x.id===r.id)&&e.jsx("svg",{className:"check-icon",xmlns:"http://www.w3.org/2000/svg",width:"10",height:"10",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"20 6 9 17 4 12"})})]})]})},r.id))]}):e.jsx("div",{className:"condition-empty-state",children:"No conditions available for this body part"});/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=o=>o.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),oe=o=>o.replace(/^([A-Z])|[\s-_]+(\w)/g,(f,h,u)=>u?u.toUpperCase():h.toLowerCase()),z=o=>{const f=oe(o);return f.charAt(0).toUpperCase()+f.slice(1)},V=(...o)=>o.filter((f,h,u)=>!!f&&f.trim()!==""&&u.indexOf(f)===h).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var re={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=l.forwardRef(({color:o="currentColor",size:f=24,strokeWidth:h=2,absoluteStrokeWidth:u,className:r="",children:x,iconNode:j,...y},C)=>l.createElement("svg",{ref:C,...re,width:f,height:f,stroke:o,strokeWidth:u?Number(h)*24/Number(f):h,className:V("lucide",r),...y},[...j.map(([m,p])=>l.createElement(m,p)),...Array.isArray(x)?x:[x]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=(o,f)=>{const h=l.forwardRef(({className:u,...r},x)=>l.createElement(ie,{ref:x,iconNode:f,className:V(`lucide-${ne(z(o))}`,`lucide-${o}`,u),...r}));return h.displayName=z(o),h};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],le=$("arrow-left",ce);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],he=$("arrow-right",de),ue=({selectedBodyParts:o,resetQuiz:f})=>{const[h,u]=l.useState([]),r=l.useRef([]),x=(m,p)=>{var d;const a=r.current[m];if(a){const c=((d=a.children[0])==null?void 0:d.clientWidth)||0;a.scrollTo({left:p*(c+40),behavior:"smooth"}),y(m,p)}},j=m=>{var a;const p=r.current[m];if(p){const d=((a=p.children[0])==null?void 0:a.clientWidth)||0,c=Math.round(p.scrollLeft/(d+40));y(m,c)}},y=(m,p)=>{u(a=>{const d=[...a];return d[m]=p,d})},C=(m,p)=>{const a=h[m]||0,d=r.current[m];if(!d)return;const c=d.children.length,b=p==="prev"?Math.max(0,a-1):Math.min(c-1,a+1);x(m,b)};return e.jsx("main",{className:"recommendations",children:e.jsxs("div",{className:"container",children:[e.jsxs("header",{className:"header",children:[e.jsx("h1",{className:"title",children:"Your Recommendations Are In!"}),e.jsx("p",{className:"subtitle",children:"Here is what we suggest based on your skin + body goals"}),e.jsxs("div",{className:"button-group",children:[e.jsx("button",{className:"link-button",onClick:f,children:"Take the quiz again"}),e.jsx("button",{className:"appointment-button",children:"Book Appointment"})]})]}),o.map((m,p)=>e.jsx("div",{children:m.conditions.map((a,d)=>{var S;const c=p*100+d,b=((S=a.recommended_services)==null?void 0:S.map(g=>{var N;return{category:((N=g.taxonomy[0])==null?void 0:N.name)||"SERVICE",title:g.title,description:g.description||"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur..."}}))||[];return h[c]===void 0&&(h[c]=0),e.jsxs("section",{className:"treatment-section",children:[e.jsx("div",{className:"section-header",children:e.jsx("h2",{className:"section-title",children:a.title})}),b.length>0?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"carousel",children:[e.jsx("div",{className:"carousel-content",ref:g=>{r.current[c]=g},onScroll:()=>j(c),children:b.map((g,N)=>e.jsx("div",{className:"carousel-item",children:e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-content",children:[e.jsx("span",{className:"badge",children:g.category}),e.jsx("h3",{className:"treatment-title",children:g.title}),e.jsx("p",{className:"treatment-description",children:g.description})]})})},N))}),e.jsxs("div",{className:"carousel-navigation",children:[e.jsx("button",{className:"carousel-prev",onClick:()=>C(c,"prev"),disabled:h[c]===0,children:e.jsx(le,{className:"w-5 h-5",color:"black"})}),e.jsx("button",{className:"carousel-next",onClick:()=>C(c,"next"),disabled:h[c]===b.length-1,children:e.jsx(he,{className:"w-5 h-5",color:"black"})})]}),e.jsx("div",{className:"dots-navigation",children:b.map((g,N)=>e.jsx("div",{className:`dot ${N===h[c]?"active":""}`,onClick:()=>x(c,N)},N))})]})}):e.jsx("p",{className:"no-treatments",children:"No treatments recommended for this condition"})]},d)})},p))]})})},L={front:[{area:"Chest",path:"M93,185 C103,175 113,175 123,185 C133,195 133,215 123,225 C113,235 103,235 93,225 C83,215 83,195 93,185 Z",left:"49.65%",top:"25.31%"},{area:"Abdomen",path:"M93,225 C103,235 113,235 123,225 C133,215 133,275 123,285 C113,295 103,295 93,285 C83,275 83,215 93,225 Z",left:"49.65%",top:"43.39%"},{area:"Arms Left",path:"M30,185 C20,195 15,215 20,235 C25,255 35,265 45,255 C55,245 60,225 55,205 C50,185 40,175 30,185 Z",left:"14.18%",top:"28.93%"},{area:"Arms Right",path:"M160,185 C170,195 175,215 170,235 C165,255 155,265 145,255 C135,245 130,225 135,205 C140,185 150,175 160,185 Z",left:"85.11%",top:"28.93%"},{area:"Flanks Left",path:"M50,225 C40,235 35,255 40,275 C45,295 55,305 65,295 C75,285 80,265 75,245 C70,225 60,215 50,225 Z",left:"24.82%",top:"43.39%"},{area:"Flanks Right",path:"M140,225 C150,235 155,255 150,275 C145,295 135,305 125,295 C115,285 110,265 115,245 C120,225 130,215 140,225 Z",left:"74.46%",top:"43.39%"},{area:"Hands Left",path:"M20,275 C10,285 5,305 10,325 C15,345 25,355 35,345 C45,335 50,315 45,295 C40,275 30,265 20,275 Z",left:"10.63%",top:"52.44%"},{area:"Hands Right",path:"M170,275 C180,285 185,305 180,325 C175,345 165,355 155,345 C145,335 140,315 145,295 C150,275 160,265 170,275 Z",left:"88.65%",top:"52.44%"},{area:"Intimate",path:"M93,285 C103,295 113,295 123,285 C133,275 133,315 123,325 C113,335 103,335 93,325 C83,315 83,275 93,285 Z",left:"49.65%",top:"54.25%"},{area:"Thighs",path:"M93,325 C103,335 113,335 123,325 C133,315 133,375 123,385 C113,395 103,395 93,385 C83,375 83,315 93,325 Z",left:"49.65%",top:"68.72%"},{area:"Lower Legs",path:"M93,385 C103,395 113,395 123,385 C133,375 133,455 123,465 C113,475 103,475 93,465 C83,455 83,375 93,385 Z",left:"49.65%",top:"86.79%"}],back:[{area:"Back Upper",path:"M93,150 C103,140 113,140 123,150 C133,160 133,200 123,210 C113,220 103,220 93,210 C83,200 83,160 93,150 Z",left:"49.65%",top:"20.25%"},{area:"Back Lower",path:"M93,210 C103,220 113,220 123,210 C133,200 133,260 123,270 C113,280 103,280 93,270 C83,260 83,200 93,210 Z",left:"49.65%",top:"40.00%"},{area:"Buttocks",path:"M93,270 C103,280 113,280 123,270 C133,260 133,310 123,320 C113,330 103,330 93,320 C83,310 83,260 93,270 Z",left:"49.65%",top:"54.80%"}],head:[{area:"Eyes",path:"M80,70 C90,65 100,65 110,70 C115,75 115,85 110,90 C100,95 90,95 80,90 C75,85 75,75 80,70 Z",left:"49.65%",top:"8.50%"},{area:"Forehead",path:"M80,50 C90,45 100,45 110,50 C115,55 115,65 110,70 C100,75 90,75 80,70 C75,65 75,55 80,50 Z",left:"49.65%",top:"5.25%"},{area:"Full Face",path:"M80,50 C100,40 120,40 140,50 C150,60 150,80 140,90 C120,100 100,100 80,90 C70,80 70,60 80,50 Z",left:"49.65%",top:"10.50%"},{area:"Lips/Mouth",path:"M90,85 C100,90 110,90 120,85 C125,82 125,88 120,85 C110,80 100,80 90,85 C85,88 85,82 90,85 Z",left:"49.65%",top:"13.25%"},{area:"Mid-Face",path:"M80,65 C90,60 100,60 110,65 C115,70 115,80 110,85 C100,90 90,90 80,85 C75,80 75,70 80,65 Z",left:"49.65%",top:"11.00%"},{area:"Neck",path:"M90,90 C100,95 110,95 120,90 C125,100 125,110 120,120 C110,125 100,125 90,120 C85,110 85,100 90,90 Z",left:"49.65%",top:"17.50%"},{area:"Scalp",path:"M80,40 C90,35 100,35 110,40 C115,45 115,55 110,60 C100,65 90,65 80,60 C75,55 75,45 80,40 Z",left:"49.65%",top:"2.50%"}]},me=({viewType:o,selectedAreas:f,onAreaSelect:h})=>{const[u,r]=l.useState(null),j=(()=>{switch(o){case"front":return L.front;case"back":return L.back;case"face":return L.head;default:return L.front}})(),y=()=>{switch(o){case"front":return"/body-front.svg";case"back":return"/body-back.svg";case"face":return"/face.svg";default:return"/body-front.svg"}},C=a=>{j.find(c=>c.area===a)&&h(a)},m=()=>o==="face"?"0 0 300 300":"0 0 187 733",p=a=>{if(o==="face"){const d=parseFloat(a.left)/100*300,c=parseFloat(a.top)/100*300;return{left:d,top:c}}else{const d=parseFloat(a.left)/100*187,c=parseFloat(a.top)/100*733;return{left:d,top:c}}};return e.jsx("div",{className:"body-map-svg-container",children:e.jsxs("svg",{viewBox:m(),className:`body-svg ${o==="face"?"face-view":""}`,preserveAspectRatio:"xMidYMid meet",children:[e.jsx("image",{href:y(),width:o==="face"?"300":"187",height:o==="face"?"300":"733",preserveAspectRatio:"xMidYMid meet"}),j.map(a=>{const{left:d,top:c}=p(a);return e.jsxs(te.Fragment,{children:[e.jsx("circle",{cx:d,cy:c,r:o==="face"?"6":"8",className:`body-area-path ${u===a.area?"hovered":""}`,onClick:()=>C(a.area),onMouseEnter:()=>r(a.area),onMouseLeave:()=>r(null)}),f.includes(a.area)&&e.jsx("circle",{cx:d,cy:c,r:o==="face"?"6":"8",className:"selected-area-indicator"})]},a.area)}),u&&e.jsx("text",{x:p(j.find(a=>a.area===u)||j[0]).left,y:p(j.find(a=>a.area===u)||j[0]).top-10,className:"area-tooltip",children:u})]})})},pe=()=>{const[o,f]=l.useState([]),[h,u]=l.useState([]),[r,x]=l.useState(null),[j,y]=l.useState([]),[C,m]=l.useState([]),[p,a]=l.useState(!0),[d,c]=l.useState(null),[b,S]=l.useState(!0),[g,N]=l.useState(!1),[B,D]=l.useState(!1),[O,A]=l.useState(!1),[T,M]=l.useState(!1),[Z,R]=l.useState(null),[k,I]=l.useState({name:"",email:"",phone:"",areas:"",conditions:"",consent:!1}),_=async()=>{var s,t;a(!0);try{const i=await fetch("https://evolvequizdev.wpengine.com/wp-json/wp-evolve-body-quiz/v1/areas",{headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include"});if(!i.ok){const v=await i.json();throw new Error(v.message||"Failed to fetch areas")}const n=await i.json();f(n),S(((t=(s=n[1])==null?void 0:s.children)==null?void 0:t.length)>0)}catch(i){const n=i instanceof Error?i.message:"Unknown error";f({message:n}),c(n)}finally{a(!1)}},H=async s=>{a(!0);try{const t=await fetch(`https://evolvequizdev.wpengine.com/wp-json/wp-evolve-body-quiz/v1/conditions?area=${s}`,{headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include"});if(!t.ok){const n=await t.json();throw new Error(n.message||"Failed to fetch conditions")}const i=await t.json();y(Array.isArray(i)?i:[])}catch(t){const i=t instanceof Error?t.message:"Failed to load conditions";c(i),y([])}finally{a(!1)}};l.useEffect(()=>{_()},[]),l.useEffect(()=>{r&&H(r.id)},[r]);const U=s=>{x(s),A(!1),M(!1),h.some(t=>t.id===s.id)||u(t=>[...t,s])},q=s=>{S(s==="front"),N(s==="back"),D(s==="face"),x(null),A(!1),M(!1)},W=()=>{if(r&&j.length>0){const s=C.findIndex(t=>t.area.id===r.id);s>=0?m(t=>t.map((i,n)=>n===s?{...i,conditions:[...i.conditions]}:i)):m(t=>[...t,{area:r,conditions:[]}])}A(!0),x(null)},Y=()=>{M(!0),R(null)};l.useEffect(()=>{C.length>0&&I(s=>({...s,areas:C.map(t=>t.area.name).join(", "),conditions:C.flatMap(t=>t.conditions.map(i=>i.title)).join(", ")}))},[C]);const E=s=>{const{name:t,value:i,type:n,checked:v}=s.target;I(w=>({...w,[t]:n==="checkbox"?v:i}))},Q=s=>{s.preventDefault();const t=new Date().toLocaleString(),i=C.map(n=>({bodyArea:n.area.name,conditions:n.conditions.map(v=>v.title),services:n.conditions.flatMap(v=>{var w;return((w=v.recommended_services)==null?void 0:w.map(F=>F.title))||[]})}));R({...k,date:t,groupedData:i}),M(!1),A(!1)},G=s=>{r&&m(t=>{const i=t.findIndex(n=>n.area.id===r.id);return i>=0?t.map((n,v)=>{if(v===i){const w=n.conditions.some(F=>F.id===s.id);return{...n,conditions:w?n.conditions.filter(F=>F.id!==s.id):[...n.conditions,s]}}return n}):[...t,{area:r,conditions:[s]}]})},K=(s,t)=>{m(i=>i.map(n=>{if(n.area.id===s){const v=n.conditions.filter(w=>w.id!==t);return{...n,conditions:v}}return n}).filter(n=>n.conditions.length>0))},J=()=>{if(!r)return[];const s=C.find(t=>t.area.id===r.id);return s?s.conditions:[]},P=(s,t)=>{var i;for(const n of s){if(n.name===t)return n;if((i=n.children)!=null&&i.length){const v=P(n.children,t);if(v)return v}}},X=()=>{R(null),u([]),m([]),x(null),A(!1),M(!1),S(!0),N(!1),D(!1)};if(d)return e.jsxs("div",{className:"error-message",children:["Error: ",d]});const ee=()=>Z?null:T?e.jsxs("div",{className:"consultation-form",children:[e.jsx("h5",{children:"Complete your Consultation"}),e.jsxs("form",{onSubmit:Q,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"name",children:"Name"}),e.jsx("input",{type:"text",id:"name",name:"name",value:k.name,onChange:E,required:!0,placeholder:"Enter your full name"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"email",children:"Email"}),e.jsx("input",{type:"email",id:"email",name:"email",value:k.email,onChange:E,required:!0,placeholder:"Enter your email"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"phone",children:"Phone"}),e.jsx("input",{type:"tel",id:"phone",name:"phone",value:k.phone,onChange:E,required:!0,placeholder:"Enter your phone number"})]}),e.jsxs("div",{className:"form-group checkbox-group",children:[e.jsx("input",{type:"checkbox",id:"consent",name:"consent",checked:k.consent||!1,onChange:E,required:!0}),e.jsxs("label",{htmlFor:"consent",className:"consent-text",children:["I agree to receiving appointment confirmations, reminders and marketing communications via email and SMS messages. Msg & data rates may apply. Msg frequency varies. Reply HELP for help and STOP to cancel. View our ",e.jsx("a",{href:"/#",children:"Privacy Policy"})]})]}),e.jsx("input",{type:"hidden",name:"areas",value:k.areas}),e.jsx("input",{type:"hidden",name:"conditions",value:k.conditions}),e.jsx("div",{className:"form-actions",children:e.jsx("button",{type:"submit",className:"area-button",disabled:p,children:p?"Submitting...":"COMPLETE CONSULTATION"})})]})]}):O&&C.length>0?e.jsxs("div",{className:"selected-body-conditions",children:[e.jsxs("div",{className:"ff",children:[e.jsx("h3",{className:"quiz-card-header-text",children:"Your Selections"}),C.map(s=>e.jsxs("div",{className:"body-part-section",children:[e.jsx("p",{className:"body-part-name",children:e.jsx("strong",{children:s.area.name})}),s.conditions.length>0?e.jsx("ul",{className:"conditions-list",children:s.conditions.map(t=>e.jsxs("li",{children:[t.title," ",e.jsx("span",{className:"delete-icon",onClick:i=>{i.stopPropagation(),K(s.area.id,t.id)},children:"×"})]},t.id))}):e.jsx("p",{className:"no-conditions",children:"No conditions selected"})]},s.area.id))]}),e.jsx("button",{onClick:Y,className:"area-button",disabled:C.reduce((s,t)=>s+t.conditions.length,0)===0,children:"COMPLETE CONSULTATION"})]}):r?e.jsx("div",{className:"condition-container",children:p?e.jsx("div",{className:"loading-spinner",children:e.jsx(se,{})}):e.jsxs(e.Fragment,{children:[e.jsx(ae,{bodypart:r.name,conditions:j,onSelect:G,selectedConditions:J()}),j.length>0&&e.jsx("button",{onClick:W,className:"area-button",children:"ADD TREATMENTS"})]})}):e.jsxs("div",{className:"start",children:[e.jsx("h3",{className:"quiz-card-header-text",children:"Your Selections"}),e.jsx("span",{className:"quiz-card-desc-text",children:"Start your quiz by clicking on a body part you want to be treated."})]});return e.jsxs(e.Fragment,{children:[!Z&&e.jsxs("div",{className:"quiz-main-grid",children:[e.jsxs("div",{className:"view-toggle-container",children:[e.jsxs("div",{className:"view-toggle-buttons",children:[!b&&e.jsx("button",{onClick:()=>q("front"),className:"flipper",children:"Front"}),!g&&e.jsx("button",{onClick:()=>q("back"),className:"flipper",children:"Back"}),!B&&e.jsx("button",{onClick:()=>q("face"),className:"flipper",children:"Face"})]}),e.jsx(me,{viewType:b?"front":g?"back":"face",selectedAreas:h.map(s=>s.name),onAreaSelect:s=>{if(Array.isArray(o)){const t=P(o,s);t&&U(t)}},showFrontView:b,showBackView:g,showFaceView:B})]}),e.jsx("div",{className:"selection-panel",children:ee()})]}),Z&&e.jsx(ue,{selectedBodyParts:C,resetQuiz:X})]})},xe=()=>e.jsx(pe,{});export{xe as default};
