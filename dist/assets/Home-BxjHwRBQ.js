import{R as z,j as e,r}from"./index-_2ZduDq6.js";const $="/assets/body-front-pOEcJjsO.svg",ee="/assets/body-back-hnvoDlEn.svg",se="/assets/face-B75LMB1l.svg",te=({areasResponse:a,onSelect:h,selectedAreas:c,isLoading:x=!1,showFrontView:n,showBackView:o,showFaceView:N})=>{const[C,j]=z.useState(null),l=()=>{if(x)return[];if(!Array.isArray(a))return[];let i;return n?i=a.find(v=>v.slug==="front"):o?i=a.find(v=>v.slug==="back"):N&&(i=a.find(v=>v.slug==="face")),(i==null?void 0:i.children)||[]},d=z.useMemo(()=>l(),[a,n,o,N,x]),p=()=>n?"Front of Body":o?"Back of Body":N?"Face Areas":"Body Areas",g=()=>n?$:o?ee:N?se:$,f=i=>{i.count===0?j(`No conditions available for ${i.name}.`):(j(null),h(i))};return x?e.jsxs("div",{className:"area-selection-loading",children:[e.jsx("div",{className:"loading-animation"}),e.jsx("p",{children:"Loading body areas..."})]}):Array.isArray(a)?e.jsxs("div",{className:"area-selection-container",children:[C&&e.jsx("div",{className:"info-message",children:C}),e.jsx("div",{className:"area-selection-grid",children:d.length>0?d.map(i=>e.jsx("button",{onClick:()=>f(i),className:`area-button ${c.some(v=>v.id===i.id)?"active":""}`,children:e.jsx("span",{className:"area-name",children:i.name})},i.id)):e.jsx("div",{className:"empty-state",children:e.jsxs("p",{children:["No ",p().toLowerCase()," available"]})})}),e.jsx("img",{src:g(),alt:p(),className:`body-image ${N?"face-image":""}`})]}):e.jsxs("div",{className:"area-selection-error",children:[e.jsx("div",{className:"error-icon",children:"!"}),e.jsx("p",{className:"error-message",children:a.message}),e.jsx("button",{className:"retry-button",onClick:()=>window.location.reload(),children:"Try Again"})]})},ne=({conditions:a=[],bodypart:h,onSelect:c,selectedConditions:x})=>!a||a.length===0?e.jsx("div",{className:"condition-empty-state",children:"No conditions available for this body part"}):e.jsxs("div",{className:"condition-grid",children:[e.jsxs("h3",{className:"concerns-header-text",children:[h," Concerns"]}),a.map(n=>e.jsx("div",{className:`condition-item ${x.some(o=>o.id===n.id)?"selected":""}`,onClick:()=>c(n),children:e.jsxs("div",{className:"condition-content",children:[e.jsx("span",{className:"condition-title",children:n.title}),e.jsxs("span",{className:`custom-checkbox ${x.some(o=>o.id===n.id)?"checked":""}`,children:[" ",x.some(o=>o.id===n.id)&&e.jsx("svg",{className:"check-icon",xmlns:"http://www.w3.org/2000/svg",width:"10",height:"10",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"20 6 9 17 4 12"})})]})]})},n.id))]});/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=a=>a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ie=a=>a.replace(/^([A-Z])|[\s-_]+(\w)/g,(h,c,x)=>x?x.toUpperCase():c.toLowerCase()),O=a=>{const h=ie(a);return h.charAt(0).toUpperCase()+h.slice(1)},P=(...a)=>a.filter((h,c,x)=>!!h&&h.trim()!==""&&x.indexOf(h)===c).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var oe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=r.forwardRef(({color:a="currentColor",size:h=24,strokeWidth:c=2,absoluteStrokeWidth:x,className:n="",children:o,iconNode:N,...C},j)=>r.createElement("svg",{ref:j,...oe,width:h,height:h,stroke:a,strokeWidth:x?Number(c)*24/Number(h):c,className:P("lucide",n),...C},[...N.map(([l,d])=>r.createElement(l,d)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=(a,h)=>{const c=r.forwardRef(({className:x,...n},o)=>r.createElement(re,{ref:o,iconNode:h,className:P(`lucide-${ae(O(a))}`,`lucide-${a}`,x),...n}));return c.displayName=O(a),c};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],le=R("arrow-left",ce);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],me=R("arrow-right",de),ue=({selectedBodyParts:a,resetQuiz:h})=>{const[c,x]=r.useState([]),n=r.useRef([]),o=(l,d)=>{var g;const p=n.current[l];if(p){const f=((g=p.children[0])==null?void 0:g.clientWidth)||0;p.scrollTo({left:d*(f+40),behavior:"smooth"}),C(l,d)}},N=l=>{var p;const d=n.current[l];if(d){const g=((p=d.children[0])==null?void 0:p.clientWidth)||0,f=Math.round(d.scrollLeft/(g+40));C(l,f)}},C=(l,d)=>{x(p=>{const g=[...p];return g[l]=d,g})},j=(l,d)=>{const p=c[l]||0,g=n.current[l];if(!g)return;const f=g.children.length,i=d==="prev"?Math.max(0,p-1):Math.min(f-1,p+1);o(l,i)};return e.jsx("main",{className:"recommendations",children:e.jsxs("div",{className:"container",children:[e.jsxs("header",{className:"header",children:[e.jsx("h1",{className:"title",children:"Your Recommendations Are In!"}),e.jsx("p",{className:"subtitle",children:"Here is what we suggest based on your skin + body goals"}),e.jsxs("div",{className:"button-group",children:[e.jsx("button",{className:"link-button",onClick:h,children:"Take the quiz again"}),e.jsx("button",{className:"appointment-button",children:"Book Appointment"})]})]}),a.map((l,d)=>e.jsxs("div",{children:[e.jsx("h2",{className:"body-part-title",children:l.area.name}),l.conditions.map((p,g)=>{var v;const f=d*100+g,i=((v=p.recommended_services)==null?void 0:v.map(b=>{var y;return{category:((y=b.taxonomy[0])==null?void 0:y.name)||"SERVICE",title:b.title,description:b.description||"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur..."}}))||[];return c[f]===void 0&&(c[f]=0),e.jsxs("section",{className:"treatment-section",children:[e.jsx("div",{className:"section-header",children:e.jsx("h2",{className:"section-title",children:p.title})}),i.length>0?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"carousel",children:[e.jsx("div",{className:"carousel-content",ref:b=>{n.current[f]=b},onScroll:()=>N(f),children:i.map((b,y)=>e.jsx("div",{className:"carousel-item",children:e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-content",children:[e.jsx("span",{className:"badge",children:b.category}),e.jsx("h3",{className:"treatment-title",children:b.title}),e.jsx("p",{className:"treatment-description",children:b.description})]})})},y))}),e.jsxs("div",{className:"carousel-navigation",children:[e.jsx("button",{className:"carousel-prev",onClick:()=>j(f,"prev"),disabled:c[f]===0,children:e.jsx(le,{className:"w-5 h-5",color:"black"})}),e.jsx("button",{className:"carousel-next",onClick:()=>j(f,"next"),disabled:c[f]===i.length-1,children:e.jsx(me,{className:"w-5 h-5",color:"black"})})]}),e.jsx("div",{className:"dots-navigation",children:i.map((b,y)=>e.jsx("div",{className:`dot ${y===c[f]?"active":""}`,onClick:()=>o(f,y)},y))})]})}):e.jsx("p",{className:"no-treatments",children:"No treatments recommended for this condition"})]},g)})]},d))]})})},he=()=>{const[a,h]=r.useState([]),[c,x]=r.useState([]),[n,o]=r.useState(null),[N,C]=r.useState([]),[j,l]=r.useState([]),[d,p]=r.useState(!0),[g,f]=r.useState(null),[i,v]=r.useState(!0),[b,y]=r.useState(!1),[T,D]=r.useState(!1),[_,A]=r.useState(!1),[U,E]=r.useState(!1),[M,B]=r.useState(null),[k,I]=r.useState({name:"",email:"",phone:"",areas:"",conditions:"",consent:!1}),W=async()=>{var t,s;p(!0);try{const m=await fetch("https://evolvequizdev.wpengine.com/wp-json/wp-evolve-body-quiz/v1/areas",{headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include"});if(!m.ok){const S=await m.json();throw new Error(S.message||"Failed to fetch areas")}const u=await m.json();h(u),v(((s=(t=u[1])==null?void 0:t.children)==null?void 0:s.length)>0)}catch(m){const u=m instanceof Error?m.message:"Unknown error";h({message:u}),f(u)}finally{p(!1)}},H=async t=>{p(!0);try{const s=await fetch(`https://evolvequizdev.wpengine.com/wp-json/wp-evolve-body-quiz/v1/conditions?area=${t}`,{headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include"});if(!s.ok){const u=await s.json();throw new Error(u.message||"Failed to fetch conditions")}const m=await s.json();C(m||[])}catch(s){const m=s instanceof Error?s.message:"Failed to load conditions";f(m),C([])}finally{p(!1)}};r.useEffect(()=>{W()},[]),r.useEffect(()=>{n&&H(n.id)},[n]);const Y=t=>{o(t),A(!1),E(!1),c.some(s=>s.id===t.id)||x(s=>[...s,t])},F=t=>{v(t==="front"),y(t==="back"),D(t==="face"),o(null),A(!1),E(!1)},Q=()=>{if(n&&N.length>0){const t=j.findIndex(s=>s.area.id===n.id);t>=0?l(s=>s.map((m,u)=>u===t?{...m,conditions:[...m.conditions]}:m)):l(s=>[...s,{area:n,conditions:[]}])}A(!0),o(null)},Z=()=>{E(!0),B(null)};r.useEffect(()=>{j.length>0&&I(t=>({...t,areas:j.map(s=>s.area.name).join(", "),conditions:j.flatMap(s=>s.conditions.map(m=>m.title)).join(", ")}))},[j]);const L=t=>{const{name:s,value:m,type:u,checked:S}=t.target;I(w=>({...w,[s]:u==="checkbox"?S:m}))},J=t=>{t.preventDefault();const s=new Date().toLocaleString(),m=j.map(u=>({bodyArea:u.area.name,conditions:u.conditions.map(S=>S.title),services:u.conditions.flatMap(S=>{var w;return((w=S.recommended_services)==null?void 0:w.map(q=>q.title))||[]})}));B({...k,date:s,groupedData:m}),E(!1),A(!1)},K=t=>{n&&l(s=>{const m=s.findIndex(u=>u.area.id===n.id);return m>=0?s.map((u,S)=>{if(S===m){const w=u.conditions.some(q=>q.id===t.id);return{...u,conditions:w?u.conditions.filter(q=>q.id!==t.id):[...u.conditions,t]}}return u}):[...s,{area:n,conditions:[t]}]})},G=()=>{if(!n)return[];const t=j.find(s=>s.area.id===n.id);return t?t.conditions:[]},V=()=>{B(null),x([]),l([]),o(null),A(!1),E(!1),v(!0),y(!1),D(!1)};if(g)return e.jsxs("div",{className:"error-message",children:["Error: ",g]});const X=()=>M?null:U?e.jsxs("div",{className:"consultation-form",children:[e.jsx("h5",{children:"Complete your Consultation"}),e.jsxs("form",{onSubmit:J,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"name",children:"Name"}),e.jsx("input",{type:"text",id:"name",name:"name",value:k.name,onChange:L,required:!0,placeholder:"Enter your full name"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"email",children:"Email"}),e.jsx("input",{type:"email",id:"email",name:"email",value:k.email,onChange:L,required:!0,placeholder:"Enter your email"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"phone",children:"Phone"}),e.jsx("input",{type:"tel",id:"phone",name:"phone",value:k.phone,onChange:L,required:!0,placeholder:"Enter your phone number"})]}),e.jsxs("div",{className:"form-group checkbox-group",children:[e.jsx("input",{type:"checkbox",id:"consent",name:"consent",checked:k.consent||!1,onChange:L,required:!0}),e.jsxs("label",{htmlFor:"consent",className:"consent-text",children:["I agree to receiving appointment confirmations, reminders and marketing communications via email and SMS messages. Msg & data rates may apply. Msg frequency varies. Reply HELP for help and STOP to cancel. View our ",e.jsx("a",{href:"/#",children:"Privacy Policy"})]})]}),e.jsx("input",{type:"hidden",name:"areas",value:k.areas}),e.jsx("input",{type:"hidden",name:"conditions",value:k.conditions}),e.jsx("div",{className:"form-actions",children:e.jsx("button",{type:"submit",className:"area-button",disabled:d,children:d?"Submitting...":"COMPLETE CONSULTATION"})})]})]}):_&&j.length>0?e.jsxs("div",{className:"selected-body-conditions",children:[e.jsxs("div",{className:"ff",children:[e.jsx("h3",{className:"quiz-card-header-text",children:"Your Selections"}),j.map(t=>e.jsxs("div",{className:"body-part-section",children:[e.jsx("p",{className:"body-part-name",children:e.jsx("strong",{children:t.area.name})}),t.conditions.length>0?e.jsx("ul",{className:"conditions-list",children:t.conditions.map(s=>e.jsxs("li",{children:[s.title," ",e.jsx("span",{className:"delete-icon",children:"×"})]},s.id))}):e.jsx("p",{className:"no-conditions",children:"No conditions selected"})]},t.area.id))]}),e.jsx("button",{onClick:Z,className:"area-button",disabled:j.reduce((t,s)=>t+s.conditions.length,0)===0,children:"COMPLETE CONSULTATION"})]}):n?d?e.jsx("div",{className:"loading-spinner",children:"Loading quiz data..."}):e.jsxs("div",{className:"condition-container",children:[e.jsx(ne,{bodypart:n.name,conditions:N,onSelect:K,selectedConditions:G()}),N.length>0&&e.jsx("button",{onClick:Q,className:"area-button",children:"ADD TREATMENTS"})]}):e.jsxs("div",{className:"start",children:[e.jsx("h3",{className:"quiz-card-header-text",children:"Your Selections"}),e.jsx("span",{className:"quiz-card-desc-text",children:"Start your quiz by clicking on a body part you want to be treated."})]});return e.jsxs(e.Fragment,{children:[!M&&e.jsxs("div",{className:"quiz-main-grid",children:[e.jsxs("div",{className:"view-toggle-container",children:[e.jsxs("div",{className:"view-toggle-buttons",children:[!i&&e.jsx("button",{onClick:()=>F("front"),className:"flipper",children:"Front"}),!b&&e.jsx("button",{onClick:()=>F("back"),className:"flipper",children:"Back"}),!T&&e.jsx("button",{onClick:()=>F("face"),className:"flipper",children:"Face"})]}),e.jsx(te,{areasResponse:a,onSelect:Y,selectedAreas:c,isLoading:d,showFrontView:i,showBackView:b,showFaceView:T})]}),e.jsx("div",{className:"selection-panel",children:X()})]}),M&&e.jsx(ue,{selectedBodyParts:j,resetQuiz:V})]})},xe=()=>e.jsx(he,{});export{xe as default};
